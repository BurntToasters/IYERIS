* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --glass-bg: rgba(28, 28, 28, 0.96);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-shadow: 0 1px 2px rgba(0, 0, 0, 0.24);
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.8);
  --text-tertiary: rgba(255, 255, 255, 0.7);
  --accent-color: #0078d4;
  --accent-rgb: 0, 120, 212;
  --accent-hover: #106ebe;
  --accent-active: #005a9e;
  --accent-light: #4da6ff;
  --accent-gradient: linear-gradient(135deg, var(--accent-color) 0%, var(--accent-hover) 100%);
  --hover-color: rgba(255, 255, 255, 0.06);
  --active-color: rgba(255, 255, 255, 0.1);
  --danger-color: #e81123;
  --danger-hover: #ff6b6b;
  --danger-active: #d60017;
  --success-color: #107c10;
  --warning-color: #ff8c00;
  --glass-modal-bg: rgba(28, 28, 28, 0.98);
  --glass-modal-border: rgba(255, 255, 255, 0.12);
  --bg-primary: #181818;
  --bg-primary-rgb: 24, 24, 24;
  --bg-secondary: #212121;
  --dropdown-bg: rgba(34, 34, 34, 0.98);
  --separator: rgba(255, 255, 255, 0.08);
  --surface-border: color-mix(in srgb, var(--text-primary) 12%, transparent);
  --surface-border-strong: color-mix(in srgb, var(--text-primary) 18%, transparent);

  --titlebar-height: 32px;
  --tab-bar-height: 32px;

  --radius-small: 6px;
  --radius-medium: 10px;
  --radius-large: 14px;
  --radius-xlarge: 18px;

  --font-family:
    -apple-system, BlinkMacSystemFont, 'Segoe UI Variable', 'Segoe UI', system-ui, ui-sans-serif,
    Helvetica, Arial, sans-serif;
  --font-mono: 'Cascadia Code', 'Fira Code', Consolas, Monaco, 'Courier New', monospace;

  --system-accent-color: var(--accent-color);
  --system-accent-rgb: var(--accent-rgb);
  --themed-icon-hue: 200deg;

  --animation-duration: 200ms;
  --animation-easing: cubic-bezier(0.33, 1, 0.68, 1);
  --animation-easing-spring: cubic-bezier(0.33, 1, 0.68, 1);

  --scrollbar-width: 10px;
  --scrollbar-thumb-radius: 5px;
  --scrollbar-show-always: 1;

  --font-size-base: 12px;
  --font-size-file-name: 11px;
  --font-size-nav: 11px;
  --font-size-section-title: 10.5px;
  --font-size-status: 10.5px;
  --font-size-breadcrumb: 11.5px;

  --icon-size-grid: 26px;
  --icon-size-list: 12px;
  --icon-size-toolbar: 26px;
  --icon-size-nav: 14px;
  --icon-size-sidebar-toggle: 24px;
  --icon-size-spinner: 32px;

  --toolbar-height: 36px;
  --toolbar-padding-v: 5px;
  --toolbar-padding-h: 8px;
  --status-bar-height: 20px;
  --address-bar-height: 24px;
  --sidebar-width: 180px;
  --sidebar-width-collapsed: 44px;
  --sidebar-toggle-bottom: 26px;
  --preview-panel-width: 260px;

  --file-grid-gap-row: 10px;
  --file-grid-gap-col: 12px;
  --file-item-padding-v: 6px;
  --file-item-padding-h: 4px;
  --list-item-padding-v: 6px;
  --list-item-padding-h: 9px;
  --list-item-gap: 8px;
  --list-item-min-height: 28px;
  --list-col-name: minmax(220px, 1fr);
  --list-col-type: 140px;
  --list-col-size: 90px;
  --list-col-modified: 160px;
  --list-header-height: 28px;
  --nav-item-padding-v: 5px;
  --nav-item-padding-h: 8px;
  --nav-item-gap: 8px;
  --sidebar-section-gap: 16px;
  --sidebar-padding-v: 10px;
  --sidebar-padding-h: 8px;
  --container-gap: 10px;
  --container-edge-padding: 6px;
  --container-edge-padding-top: 6px;
  --container-edge-padding-bottom: 0px;
  --grid-min-column: 82px;
  --file-icon-margin-bottom: 4px;
  --toolbar-gap: 6px;
  --toolbar-left-right-gap: 4px;
  --toolbar-separator-height: 16px;
  --toolbar-separator-margin-v: 0;
  --toolbar-separator-margin-h: 4px;
  --breadcrumb-gap: 3px;
  --breadcrumb-padding-v: 4px;
  --breadcrumb-padding-h: 8px;
  --status-bar-padding-h: 10px;
  --list-info-gap: 18px;
  --section-title-margin-bottom: 3px;

  --modal-max-width: 600px;
  --modal-padding: 24px;
  --settings-modal-width: 980px;
  --settings-modal-height: 680px;
  --dialog-modal-max-width: 450px;

  --spacing-xs: 2px;
  --spacing-sm: 4px;
  --spacing-md: 6px;
  --spacing-lg: 8px;
  --spacing-xl: 10px;
  --spacing-xxl: 12px;
  --spacing-xxxl: 16px;
  --spacing-huge: 20px;
  --spacing-massive: 24px;
}

body.platform-darwin {
  --animation-duration: 250ms;
  --animation-easing: cubic-bezier(0.2, 0.8, 0.2, 1);
  --animation-easing-spring: cubic-bezier(0.2, 0.8, 0.2, 1.15);
  --scrollbar-width: 8px;
  --scrollbar-thumb-radius: 4px;
  --scrollbar-show-always: 0;
  --radius-small: 8px;
  --radius-medium: 12px;
  --titlebar-height: 38px;
}

body.platform-win32 {
  --animation-duration: 167ms;
  --animation-easing: cubic-bezier(0.4, 0, 0.2, 1);
  --animation-easing-spring: cubic-bezier(0.4, 0, 0.2, 1);
  --scrollbar-width: 12px;
  --scrollbar-thumb-radius: 0px;
  --scrollbar-show-always: 1;
  --radius-small: 4px;
  --radius-medium: 8px;
  --titlebar-height: 36px;
}

body.platform-linux {
  --animation-duration: 200ms;
  --animation-easing: cubic-bezier(0.25, 0.1, 0.25, 1);
  --animation-easing-spring: cubic-bezier(0.25, 0.1, 0.25, 1);
  --scrollbar-width: 10px;
  --scrollbar-thumb-radius: 5px;
  --scrollbar-show-always: 1;
}

body.compact-ui {
  --font-size-base: 11px;
  --font-size-file-name: 10px;
  --font-size-nav: 10px;
  --font-size-section-title: 9.5px;
  --font-size-status: 9.5px;
  --font-size-breadcrumb: 10.5px;

  --icon-size-grid: 22px;
  --icon-size-list: 11px;
  --icon-size-toolbar: 22px;
  --icon-size-nav: 12px;
  --icon-size-sidebar-toggle: 20px;
  --icon-size-spinner: 28px;

  --toolbar-height: 32px;
  --toolbar-padding-v: 4px;
  --toolbar-padding-h: 6px;
  --status-bar-height: 18px;
  --address-bar-height: 22px;
  --sidebar-width: 160px;
  --sidebar-width-collapsed: 38px;
  --sidebar-toggle-bottom: 22px;
  --tab-bar-height: 28px;
  --preview-panel-width: 220px;

  --file-grid-gap-row: 6px;
  --file-grid-gap-col: 8px;
  --file-item-padding-v: 4px;
  --file-item-padding-h: 3px;
  --list-item-padding-v: 4px;
  --list-item-padding-h: 7px;
  --list-item-gap: 6px;
  --list-item-min-height: 24px;
  --list-header-height: 24px;
  --nav-item-padding-v: 3px;
  --nav-item-padding-h: 6px;
  --nav-item-gap: 6px;
  --sidebar-section-gap: 12px;
  --sidebar-padding-v: 6px;
  --sidebar-padding-h: 6px;
  --container-gap: 6px;
  --grid-min-column: 70px;
  --file-icon-margin-bottom: 3px;
  --toolbar-gap: 4px;
  --breadcrumb-gap: 2px;
  --breadcrumb-padding-v: 3px;
  --breadcrumb-padding-h: 6px;
}

body.large-ui {
  --font-size-base: 13px;
  --font-size-file-name: 11.5px;
  --font-size-nav: 12px;
  --font-size-section-title: 11px;
  --font-size-status: 11.5px;
  --font-size-breadcrumb: 12px;

  --icon-size-grid: 44px;
  --icon-size-list: 18px;
  --icon-size-toolbar: 34px;
  --icon-size-nav: 16px;
  --icon-size-sidebar-toggle: 28px;
  --icon-size-spinner: 44px;

  --toolbar-height: 48px;
  --toolbar-padding-v: 10px;
  --toolbar-padding-h: 12px;
  --status-bar-height: 24px;
  --address-bar-height: 28px;
  --sidebar-width: 200px;
  --sidebar-width-collapsed: 52px;
  --sidebar-toggle-bottom: 32px;
  --tab-bar-height: 36px;
  --preview-panel-width: 320px;

  --file-grid-gap-row: 8px;
  --file-grid-gap-col: 10px;
  --file-item-padding-v: 10px;
  --file-item-padding-h: 8px;
  --list-item-padding-v: 8px;
  --list-item-padding-h: 12px;
  --list-item-gap: 12px;
  --list-item-min-height: 36px;
  --list-col-name: minmax(260px, 1fr);
  --list-col-type: 170px;
  --list-col-size: 110px;
  --list-col-modified: 190px;
  --list-header-height: 34px;
  --nav-item-padding-v: 6px;
  --nav-item-padding-h: 10px;
  --nav-item-gap: 10px;
  --sidebar-section-gap: 20px;
  --sidebar-padding-v: 12px;
  --sidebar-padding-h: 10px;
  --container-gap: 12px;
  --container-edge-padding: 8px;
  --container-edge-padding-top: 8px;
  --container-edge-padding-bottom: 0px;
  --grid-min-column: 98px;
  --file-icon-margin-bottom: 8px;
  --toolbar-gap: 8px;
  --toolbar-left-right-gap: 6px;
  --toolbar-separator-height: 20px;
  --toolbar-separator-margin-v: 0;
  --toolbar-separator-margin-h: 6px;
  --breadcrumb-gap: 4px;
  --breadcrumb-padding-v: 5px;
  --breadcrumb-padding-h: 10px;
  --status-bar-padding-h: 16px;
  --list-info-gap: 24px;
  --section-title-margin-bottom: 4px;
}

body {
  font-family: var(--font-family);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  overflow: hidden;
  background-color: var(--bg-primary);
  background-image: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(0, 0, 0, 0.02));
  color: var(--text-primary);
  height: 100vh;
  font-size: var(--font-size-base);
  letter-spacing: -0.01em;
  filter: none;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background:
    radial-gradient(ellipse 120% 60% at 50% -20%, rgba(255, 255, 255, 0.04), transparent 60%),
    radial-gradient(ellipse 120% 60% at 50% 120%, rgba(0, 0, 0, 0.25), transparent 60%);
  z-index: -1;
  pointer-events: none;
}

body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='7' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.06'/%3E%3C/svg%3E");
  background-size: 256px 256px;
  pointer-events: none;
  z-index: 1;
  mix-blend-mode: soft-light;
  opacity: 0;
}

.glass-panel {
  background: var(--glass-bg);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  border-radius: var(--radius-medium);
}

.glass-input {
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid var(--separator);
  border-radius: var(--radius-small);
  transition:
    background-color var(--animation-duration) var(--animation-easing),
    border-color var(--animation-duration) var(--animation-easing),
    box-shadow var(--animation-duration) var(--animation-easing);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

.glass-input:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.18);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

.glass-input:focus {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--accent-color);
  outline: none;
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.35);
}

body.platform-darwin .glass-input {
  border-radius: 8px;
  transition: all var(--animation-duration) var(--animation-easing);
}

body.platform-darwin .glass-input:focus {
  border-color: var(--system-accent-color, var(--accent-color));
  box-shadow:
    inset 0 1px 2px rgba(0, 0, 0, 0.2),
    0 0 0 3px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.3);
}

body.platform-win32 .glass-input {
  border-radius: 4px;
  transition: all var(--animation-duration) var(--animation-easing);
}

body.platform-win32 .glass-input:focus {
  border-color: transparent;
  border-bottom-color: var(--system-accent-color, var(--accent-color));
  box-shadow: none;
}

.titlebar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: var(--titlebar-height);
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--separator);
  -webkit-app-region: drag;
  padding: 0 0 0 12px;
  position: relative;
  z-index: 10;
}

.titlebar-drag-region {
  display: flex;
  align-items: center;
  flex: 1;
  gap: 8px;
}

.titlebar-icon {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.85;
}

.titlebar-icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: none;
}

.titlebar-title {
  font-size: 13px;
  font-weight: 500;
  letter-spacing: -0.01em;
  opacity: 0.85;
}

.titlebar-controls {
  display: flex;
  -webkit-app-region: no-drag;
  gap: 0;
}

.titlebar-button {
  width: 40px;
  height: 32px;
  border: none;
  background: transparent;
  color: var(--text-primary);
  cursor: pointer;
  transition: background-color 0.12s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
}

.titlebar-button:hover {
  background: var(--hover-color);
}

.titlebar-button:active {
  background: var(--active-color);
}

.titlebar-button.close:hover {
  background: var(--danger-color);
  color: var(--text-primary);
}

.titlebar-button.close:active {
  background: var(--danger-active);
}

body.platform-darwin .titlebar {
  padding-left: 78px;
  justify-content: center;
}

body.platform-darwin .titlebar-drag-region {
  justify-content: center;
  gap: 6px;
}

body.platform-darwin .titlebar-controls {
  display: none;
}

body.platform-darwin .titlebar-title {
  font-size: 13px;
  font-weight: 600;
  letter-spacing: -0.02em;
}

body.platform-win32 .titlebar {
  height: var(--titlebar-height);
}

body.platform-win32 .titlebar-button {
  width: 46px;
  height: 36px;
}

body.platform-win32 .titlebar-title {
  font-family: 'Segoe UI Variable', 'Segoe UI', system-ui, sans-serif;
}

.tab-bar {
  display: flex;
  align-items: center;
  height: var(--tab-bar-height);
  padding: 0 6px;
  gap: 4px;
  border-radius: 0;
  border-left: none;
  border-right: none;
  border-top: none;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--separator);
}

.tab-list {
  display: flex;
  align-items: center;
  gap: 2px;
  overflow-x: auto;
  flex: 1;
  scrollbar-width: none;
}

.tab-list::-webkit-scrollbar {
  display: none;
}

.tab-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: transparent;
  border: 1px solid transparent;
  border-radius: var(--radius-small);
  cursor: pointer;
  min-width: 100px;
  max-width: 180px;
  transition: all 0.15s ease;
  position: relative;
}

.tab-item:hover {
  background: var(--hover-color);
}

.tab-item.active {
  background: rgba(var(--accent-rgb), 0.16);
  border-color: rgba(var(--accent-rgb), 0.3);
}

.tab-item .tab-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.tab-item .tab-icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.tab-item .tab-title {
  flex: 1;
  font-size: var(--font-size-nav);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text-primary);
}

.tab-item .tab-close {
  width: 16px;
  height: 16px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition:
    opacity 0.15s,
    background 0.15s;
  flex-shrink: 0;
  font-size: 14px;
  line-height: 1;
}

.tab-item:hover .tab-close,
.tab-item.active .tab-close {
  opacity: 1;
}

.tab-item .tab-close:hover {
  background: var(--hover-color);
  color: var(--text-primary);
}

.tab-item .tab-close:active {
  background: var(--active-color);
}

.tab-new-btn {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  border-radius: var(--radius-small);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
  flex-shrink: 0;
}

.tab-new-btn:hover {
  background: var(--hover-color);
  color: var(--text-primary);
}

.tab-new-btn:active {
  background: var(--active-color);
  transform: none;
}

body.tabs-enabled .container {
  height: calc(
    100vh - var(--titlebar-height) - var(--tab-bar-height) - var(--status-bar-height) -
      var(--container-edge-padding-top) - var(--container-edge-padding-bottom)
  );
}

body.tabs-enabled .tab-bar {
  display: flex;
}

body.tabs-enabled.tabs-single .container {
  height: calc(
    100vh - var(--titlebar-height) - var(--status-bar-height) - var(--container-edge-padding-top) -
      var(--container-edge-padding-bottom)
  );
}

body.tabs-enabled.tabs-single .tab-bar {
  display: none;
}

.toolbar-new-tab-btn {
  display: none;
}

body.tabs-enabled.tabs-single .toolbar-new-tab-btn {
  display: flex;
}

.container {
  display: flex;
  height: calc(
    100vh - var(--titlebar-height) - var(--status-bar-height) - var(--container-edge-padding-top) -
      var(--container-edge-padding-bottom)
  );
  padding: var(--container-edge-padding-top) var(--container-edge-padding)
    var(--container-edge-padding-bottom);
  gap: var(--container-gap);
  position: relative;
  z-index: 2;
}

.sidebar {
  width: var(--sidebar-width-current, var(--sidebar-width));
  padding: var(--sidebar-padding-v) var(--sidebar-padding-h);
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  gap: calc(var(--sidebar-section-gap) - 2px);
  background: var(--bg-secondary);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  isolation: isolate;
  transition: width var(--animation-duration) var(--animation-easing);
  position: relative;
}

.sidebar.collapsed {
  width: var(--sidebar-width-collapsed);
  padding: var(--sidebar-padding-v) 4px;
}

.sidebar.collapsed .sidebar-header {
  justify-content: center;
  border-bottom-color: transparent;
}

.sidebar.collapsed .section-title {
  display: none;
}

.sidebar.collapsed .nav-item {
  justify-content: center;
  padding: 6px;
}

.sidebar.collapsed .nav-label {
  display: none;
}

.sidebar.collapsed .nav-icon {
  margin: 0;
}

.sidebar.collapsed .bookmark-add-btn {
  display: none;
}

.sidebar.collapsed .folder-tree {
  display: none;
}

.sidebar.collapsed .section-header {
  display: none;
}

.sidebar.collapsed .sidebar-section.quick-actions .section-header {
  display: flex;
  justify-content: flex-start;
  padding: 0 4px 2px;
}

.sidebar.collapsed .section-body {
  display: none;
}

.sidebar.collapsed .sidebar-section:not(.quick-actions) {
  display: none;
}

.sidebar.collapsed .sidebar-section.quick-actions {
  padding-top: 2px;
}

.sidebar.collapsed .sidebar-resize-handle {
  display: none;
}

.sidebar-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: calc(var(--icon-size-sidebar-toggle) + 4px);
  height: calc(var(--icon-size-sidebar-toggle) + 4px);
  padding: 2px;
  background: rgba(var(--accent-rgb), 0.14);
  border: 1px solid rgba(var(--accent-rgb), 0.28);
  border-radius: var(--radius-small);
  cursor: pointer;
  color: var(--text-primary);
  transition: all var(--animation-duration) var(--animation-easing);
  z-index: 50;
  flex-shrink: 0;
}

.sidebar-toggle:hover {
  background: rgba(var(--accent-rgb), 0.22);
  border-color: rgba(var(--accent-rgb), 0.4);
  color: var(--text-primary);
}

.sidebar-toggle:active {
  background: rgba(var(--accent-rgb), 0.3);
  border-color: rgba(var(--accent-rgb), 0.5);
}

.sidebar-toggle-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.sidebar-toggle svg {
  transition: transform var(--animation-duration) var(--animation-easing);
}

.sidebar.collapsed .sidebar-toggle {
  width: calc(var(--icon-size-sidebar-toggle) + 4px);
  padding: 2px;
}

.sidebar.collapsed .sidebar-toggle svg {
  transform: rotate(180deg);
}

.sidebar-resize-handle {
  position: absolute;
  top: 0;
  right: -3px;
  width: 6px;
  height: 100%;
  cursor: col-resize;
  background: transparent;
  z-index: 20;
}

.sidebar-resize-handle:hover,
.sidebar-resize-handle.resizing {
  background: rgba(var(--accent-rgb), 0.2);
}

.sidebar::-webkit-scrollbar {
  width: 6px;
}

.sidebar::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.12);
  border-radius: 3px;
  border: 1px solid transparent;
  background-clip: padding-box;
}

.sidebar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
  background-clip: padding-box;
}

.sidebar-section {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sidebar-section + .sidebar-section {
  padding-top: 0;
  margin-top: 4px;
  border-top: none;
}

.sidebar-section.primary {
  background: transparent;
  border: none;
  border-radius: 0;
  padding: 0;
}

.section-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 2px 4px;
  margin-bottom: 2px;
}

.section-header .sidebar-toggle {
  margin-right: 2px;
}

.section-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  width: 100%;
  background: transparent;
  border: none;
  border-radius: var(--radius-small);
  cursor: pointer;
  padding: 2px 4px;
  color: var(--text-secondary);
  font-size: var(--font-size-section-title);
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0;
  transition:
    background var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing);
}

.section-toggle:hover {
  background: var(--hover-color);
  color: var(--text-secondary);
}

.section-toggle:active {
  background: var(--active-color);
  color: var(--text-primary);
}

.section-title {
  font-size: var(--font-size-section-title);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-tertiary);
  opacity: 0.8;
  text-shadow: none;
  margin: 0;
  padding: 0;
}

.section-caret {
  font-size: 11px;
  opacity: 0.6;
  transition:
    transform var(--animation-duration) var(--animation-easing),
    opacity var(--animation-duration) var(--animation-easing);
}

.section-body {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.section-action {
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  width: 20px;
  height: 20px;
  border-radius: var(--radius-small);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  transition:
    background var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing);
}

.section-action:hover {
  background: var(--hover-color);
  color: var(--text-primary);
}

.section-action:active {
  background: var(--active-color);
}

.sidebar-section.collapsed .section-body {
  display: none;
}

.sidebar-section.collapsed .section-caret {
  transform: rotate(-90deg);
  opacity: 0.45;
}

.sidebar-section.primary .section-title {
  color: var(--text-tertiary);
  opacity: 0.8;
}

.quick-actions-grid {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 0;
}

.nav-item.quick-action {
  flex-direction: row;
  justify-content: flex-start;
  text-align: left;
  padding: var(--nav-item-padding-v) var(--nav-item-padding-h);
  gap: var(--nav-item-gap);
  font-size: var(--font-size-nav);
}

.nav-item.quick-action .nav-icon {
  width: 14px;
  height: 14px;
  opacity: 0.9;
}

.nav-item.quick-action .nav-icon .twemoji {
  margin: 0;
}

.nav-item.quick-action .nav-label {
  flex: 1;
  line-height: 1.2;
}

.sidebar.collapsed .quick-actions-grid {
  padding: 0;
}

.sidebar.collapsed .nav-item.quick-action {
  padding: 6px;
}

.sidebar-empty {
  padding: 4px 8px 6px;
  font-size: 11px;
  color: var(--text-tertiary);
  opacity: 0.8;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: var(--nav-item-gap);
  padding: var(--nav-item-padding-v) var(--nav-item-padding-h);
  border-radius: var(--radius-small);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.33, 1, 0.68, 1);
  font-size: var(--font-size-nav);
  font-weight: 500;
  color: var(--text-secondary);
  position: relative;
}

.nav-item:hover {
  background: var(--hover-color);
  color: var(--text-primary);
  transform: none;
  box-shadow: none;
}

.nav-item:active {
  background: var(--active-color);
  transform: none;
}

.nav-item.active {
  background: rgba(var(--accent-rgb), 0.14);
  color: var(--text-primary);
  box-shadow: none;
}

.nav-item.active::before {
  display: none;
}

.folder-tree {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.tree-item {
  display: flex;
  align-items: center;
  gap: var(--nav-item-gap);
  padding: var(--nav-item-padding-v) var(--nav-item-padding-h);
  border-radius: var(--radius-small);
  cursor: pointer;
  font-size: var(--font-size-nav);
  font-weight: 500;
  color: var(--text-secondary);
  position: relative;
}

.tree-item:hover {
  background: var(--hover-color);
  color: var(--text-primary);
}

.tree-item.active {
  background: rgba(var(--accent-rgb), 0.14);
  color: var(--text-primary);
}

.tree-item.drag-over {
  background: rgba(var(--accent-rgb), 0.22);
  color: var(--text-primary);
}

.tree-item.spring-loading {
  animation: spring-load-pulse 0.4s ease-in-out infinite;
}

.tree-toggle {
  width: 12px;
  height: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  opacity: 0.6;
  flex-shrink: 0;
}

.tree-icon {
  width: 14px;
  height: 14px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.tree-icon .twemoji {
  width: 14px;
  height: 14px;
}

.tree-icon .file-icon {
  margin-bottom: 0;
  font-size: 14px;
}

.tree-item[data-expanded='true'] .tree-toggle {
  opacity: 0.9;
}

.tree-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tree-children {
  display: none;
  flex-direction: column;
  margin-left: 10px;
  border-left: 1px solid rgba(255, 255, 255, 0.06);
  padding-left: 6px;
}

.tree-item[data-expanded='true'] + .tree-children {
  display: flex;
}

.nav-icon {
  font-size: var(--icon-size-nav);
  width: var(--icon-size-nav);
  height: var(--icon-size-nav);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.8;
  filter: none;
}

.nav-item.active .nav-icon {
  opacity: 1;
}

.nav-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-width: 0;
}

.toolbar {
  display: flex;
  align-items: center;
  gap: var(--toolbar-gap);
  padding: var(--toolbar-padding-v) var(--toolbar-padding-h);
  min-height: var(--toolbar-height);
  position: relative;
  z-index: 100;
  box-shadow: none;
}

.toolbar .view-options {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: var(--radius-small);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.toolbar-left,
.toolbar-right {
  display: flex;
  gap: var(--toolbar-left-right-gap);
  align-items: center;
}

.toolbar-right {
  justify-content: flex-end;
}

.toolbar-group {
  display: inline-flex;
  align-items: center;
  gap: var(--toolbar-left-right-gap);
  padding: 2px 4px;
  border-radius: var(--radius-medium);
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.toolbar-divider {
  width: 1px;
  height: var(--toolbar-separator-height);
  background: var(--separator);
  margin: 0 6px;
}

.view-option {
  border: none;
  background: transparent;
  color: var(--text-secondary);
  width: 28px;
  height: 26px;
  border-radius: 6px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--animation-duration) var(--animation-easing);
}

.view-option:hover {
  color: var(--text-primary);
  background: var(--hover-color);
}

.view-option.active {
  color: var(--text-primary);
  background: rgba(var(--accent-rgb), 0.2);
  box-shadow: inset 0 0 0 1px rgba(var(--accent-rgb), 0.35);
}

#view-toggle-btn {
  display: none;
}

.toolbar-center {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.toolbar-separator {
  width: 1px;
  height: var(--toolbar-separator-height);
  background: rgba(255, 255, 255, 0.12);
  margin: var(--toolbar-separator-margin-v) var(--toolbar-separator-margin-h);
}

.toolbar-button {
  width: var(--icon-size-toolbar);
  height: var(--icon-size-toolbar);
  border: none;
  background: transparent;
  color: var(--text-primary);
  border-radius: var(--radius-small);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.33, 1, 0.68, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.toolbar-button:hover:not(:disabled) {
  background: var(--hover-color);
  box-shadow: none;
  transform: none;
}

.toolbar-button:active:not(:disabled) {
  background: var(--active-color);
  transform: none;
}

.toolbar-button:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

body.platform-darwin .toolbar-button {
  border-radius: 8px;
  transition: all var(--animation-duration) var(--animation-easing-spring);
}

body.platform-darwin .toolbar-button:hover:not(:disabled) {
  background: var(--hover-color);
}

body.platform-darwin .toolbar-button:active:not(:disabled) {
  background: var(--active-color);
  transform: none;
}

body.platform-win32 .toolbar-button {
  border-radius: 4px;
  transition: all var(--animation-duration) var(--animation-easing);
}

body.platform-win32 .toolbar-button:hover:not(:disabled) {
  background: var(--hover-color);
}

body.platform-win32 .toolbar-button:active:not(:disabled) {
  background: var(--active-color);
}

.clipboard-indicator {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  margin-left: 8px;
  background: rgba(var(--accent-rgb), 0.1);
  border-radius: 4px;
  font-size: 11px;
  color: var(--accent-color);
  transition: all 0.15s ease;
}

.clipboard-indicator.cut-mode {
  background: rgba(255, 140, 0, 0.1);
  color: var(--warning-color);
}

.clipboard-indicator .clipboard-icon {
  opacity: 0.9;
}

.selection-indicator {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
  row-gap: 4px;
  padding: 4px 8px;
  margin-left: 8px;
  background: rgba(var(--accent-rgb), 0.1);
  border-radius: 4px;
  font-size: 11px;
  color: var(--text-primary);
  transition: all 0.15s ease;
}

.selection-count {
  font-weight: 600;
  color: var(--accent-color);
  min-width: 14px;
  text-align: center;
}

.selection-text {
  color: var(--text-secondary);
}

.selection-action {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 3px;
  padding: 2px 6px;
  font-size: 10px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.selection-action:hover {
  background: rgba(255, 255, 255, 0.2);
  color: var(--text-primary);
}

.selection-action:active {
  transform: scale(0.95);
}

body.theme-light .selection-indicator {
  background: rgba(var(--accent-rgb), 0.1);
}

body.theme-light .selection-action {
  background: rgba(0, 0, 0, 0.05);
}

body.theme-light .selection-action:hover {
  background: rgba(0, 0, 0, 0.1);
}

.notification-badge {
  position: absolute;
  top: -2px;
  right: -2px;
  background-color: var(--danger-color);
  color: white;
  font-size: 10px;
  font-weight: bold;
  padding: 2px 5px;
  border-radius: 10px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  pointer-events: none;
  z-index: 10;
  min-width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.address-bar-wrapper {
  position: relative;
  width: 100%;
  z-index: 200;
}

.address-bar {
  display: flex;
  align-items: center;
  padding: 0 6px;
  gap: 6px;
  height: var(--address-bar-height);
  width: 100%;
}

.breadcrumb {
  display: inline-flex;
  align-items: center;
  gap: var(--breadcrumb-gap);
  font-size: var(--font-size-breadcrumb);
  flex: 1;
  overflow: hidden;
}

.breadcrumb-item {
  display: inline-flex;
  align-items: center;
  gap: var(--breadcrumb-gap);
  padding: var(--breadcrumb-padding-v) var(--breadcrumb-padding-h);
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.12s ease;
  white-space: nowrap;
}

.breadcrumb-item:hover {
  background: var(--hover-color);
  box-shadow: none;
}

.breadcrumb-item.drag-over {
  background: rgba(var(--accent-rgb), 0.2);
  box-shadow: 0 0 0 1px rgba(var(--accent-rgb), 0.3);
}

.breadcrumb-caret {
  font-size: 10px;
  opacity: 0.6;
}

.breadcrumb-menu {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  min-width: 200px;
  max-height: 240px;
  overflow: auto;
  background: var(--dropdown-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-medium);
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
  padding: 6px;
  z-index: 500;
}

.breadcrumb-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: var(--radius-small);
  cursor: pointer;
  font-size: 12px;
  color: var(--text-secondary);
}

.breadcrumb-menu-item:hover {
  background: var(--hover-color);
  color: var(--text-primary);
}

.breadcrumb-separator {
  opacity: 0.4;
  font-size: 10px;
  user-select: none;
  pointer-events: none;
}

.address-icon {
  font-size: 14px;
  opacity: 0.6;
}

#address-input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  color: var(--text-primary);
  font-size: 13px;
  font-family: var(--font-family);
  font-weight: 400;
}

#address-input::placeholder {
  color: var(--text-tertiary);
}

#address-input::selection {
  background: var(--accent-color);
  color: var(--text-primary);
}

.search-bar-wrapper {
  position: relative;
  width: 100%;
  z-index: 200;
}

.history-dropdown {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  background: var(--dropdown-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-medium);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.28);
  z-index: 5000;
  max-height: 300px;
  overflow-y: auto;
  overflow-x: hidden;
  pointer-events: auto;
  animation: dropdown-slide 0.2s cubic-bezier(0.33, 1, 0.68, 1);
}

@keyframes dropdown-slide {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.history-dropdown::-webkit-scrollbar {
  width: 8px;
}

.history-dropdown::-webkit-scrollbar-track {
  background: transparent;
}

.history-dropdown::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

.history-dropdown::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

.history-item {
  padding: 12px 14px;
  color: var(--text-primary);
  cursor: pointer;
  transition: background 0.15s ease;
  font-size: 13px;
  border-bottom: 1px solid var(--separator);
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
  background: transparent;
  pointer-events: auto;
}

.history-item:hover {
  background: var(--hover-color);
  box-shadow: none;
}

.history-item:active {
  background: var(--active-color);
  box-shadow: none;
}

.history-item:last-of-type {
  border-bottom: 1px solid var(--separator);
}

.history-clear {
  padding: 12px 14px;
  color: var(--danger-hover);
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: 13px;
  text-align: center;
  font-weight: 500;
  user-select: none;
  display: block;
  background: transparent;
  pointer-events: auto;
}

.history-clear:hover {
  background: rgba(232, 17, 35, 0.2);
  color: var(--danger-hover);
}

.search-filter-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 4px 6px;
  border-radius: var(--radius-small);
  transition: all 0.15s ease;
  position: relative;
}

.filter-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 14px;
  height: 14px;
  padding: 0 4px;
  background: var(--accent-color);
  color: var(--text-primary);
  font-size: 9px;
  font-weight: 600;
  border-radius: 7px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-filter-toggle:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

.search-filter-toggle.active {
  background: var(--accent-color);
  color: var(--text-primary);
}

.search-filters-panel {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  background: var(--dropdown-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-medium);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.28);
  z-index: 5000;
  padding: 16px;
  animation: dropdown-slide 0.2s cubic-bezier(0.33, 1, 0.68, 1);
}

.search-filter-group {
  margin-bottom: 14px;
}

.search-filter-group:last-of-type {
  margin-bottom: 16px;
}

.search-filter-group label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.search-filter-group select,
.search-filter-group input[type='number'],
.search-filter-group input[type='date'] {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  border-radius: var(--radius-small);
  color: var(--text-primary);
  padding: 8px 10px;
  font-size: 13px;
  outline: none;
  transition: all 0.15s ease;
}

.search-filter-group select:focus,
.search-filter-group input[type='number']:focus,
.search-filter-group input[type='date']:focus {
  border-color: var(--accent-color);
  background: var(--bg-secondary);
}

.search-filter-group select {
  width: 100%;
  cursor: pointer;
}

.search-filter-size-inputs,
.search-filter-date-inputs {
  display: flex;
  align-items: center;
  gap: 8px;
}

.search-filter-size-inputs input[type='number'] {
  width: 70px;
}

.search-filter-size-inputs select {
  width: auto;
  min-width: 60px;
}

.search-filter-size-inputs span,
.search-filter-date-inputs span {
  color: var(--text-secondary);
  font-size: 12px;
}

.search-filter-date-inputs input[type='date'] {
  flex: 1;
  min-width: 0;
}

.search-filter-actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  padding-top: 10px;
  border-top: 1px solid var(--separator);
}

.search-filter-btn {
  padding: 8px 16px;
  border-radius: var(--radius-small);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  border: none;
  transition: all 0.15s ease;
}

.search-filter-btn.primary {
  background: var(--accent-color);
  color: var(--text-primary);
}

.search-filter-btn.primary:hover {
  filter: brightness(1.1);
}

.search-filter-btn.secondary {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

.search-filter-btn.secondary:hover {
  background: rgba(255, 255, 255, 0.15);
}

.search-content-toggle {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  font-size: 13px !important;
  font-weight: 500 !important;
  text-transform: none !important;
  color: var(--text-primary) !important;
}

.search-content-toggle input {
  display: none;
}

.toggle-slider-small {
  width: 36px;
  height: 20px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  position: relative;
  transition: background 0.2s;
  flex-shrink: 0;
}

.toggle-slider-small::before {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  left: 2px;
  top: 2px;
  background: white;
  border-radius: 50%;
  transition: transform 0.2s;
}

.search-content-toggle input:checked + .toggle-slider-small {
  background: var(--accent-color);
}

.search-content-toggle input:checked + .toggle-slider-small::before {
  transform: translateX(16px);
}

.search-content-toggle.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.search-content-toggle.disabled .toggle-slider-small {
  cursor: not-allowed;
}

.filter-hint {
  font-size: 11px;
  color: var(--text-tertiary);
  margin-top: 6px;
  line-height: 1.4;
}

.match-context {
  font-size: 11px;
  color: var(--text-secondary);
  background: rgba(0, 0, 0, 0.25);
  padding: 6px 8px;
  border-radius: 4px;
  margin-top: 6px;
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
  line-height: 1.4;
}

.match-context .match-highlight {
  background: rgba(var(--accent-rgb), 0.4);
  color: var(--text-primary);
  padding: 1px 3px;
  border-radius: 2px;
}

.match-context .match-line-number {
  font-size: 10px;
  color: var(--text-tertiary);
  margin-left: 8px;
  opacity: 0.8;
}

.history-clear:active {
  background: rgba(232, 17, 35, 0.3);
}

.history-empty {
  padding: 20px 14px;
  color: var(--text-secondary);
  text-align: center;
  font-size: 13px;
}

.file-view {
  flex: 1;
  padding: 8px;
  overflow-y: auto;
  position: relative;
}

.file-view::-webkit-scrollbar {
  width: var(--scrollbar-width);
}

.file-view::-webkit-scrollbar-track {
  background: transparent;
  margin: 4px;
}

.file-view::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
  border-radius: var(--scrollbar-thumb-radius);
  border: 2px solid transparent;
  background-clip: padding-box;
  transition: background var(--animation-duration) var(--animation-easing);
}

.file-view::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.25);
  background-clip: padding-box;
}

body.platform-darwin .file-view {
  scrollbar-width: thin;
}

body.platform-darwin .file-view::-webkit-scrollbar {
  width: 8px;
}

body.platform-darwin .file-view::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.selection-rect {
  position: absolute;
  border: 1px solid var(--accent-color);
  background: rgba(var(--accent-rgb), 0.15);
  pointer-events: none;
  z-index: 100;
  display: none;
  border-radius: 2px;
}

.selection-rect.active {
  display: block;
}

body.reduce-motion .selection-rect {
  transition: none;
}

body.platform-darwin .file-view:not(:hover)::-webkit-scrollbar-thumb {
  background: transparent;
}

body.platform-win32 .file-view::-webkit-scrollbar {
  width: 12px;
}

body.platform-win32 .file-view::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 0;
  border: 3px solid transparent;
  background-clip: padding-box;
}

body.platform-win32 .file-view::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.35);
}

.file-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(var(--grid-min-column), 1fr));
  gap: var(--file-grid-gap-row) var(--file-grid-gap-col);
  padding: 8px;
}

.home-view {
  display: flex;
  flex-direction: column;
  gap: 18px;
  padding: 12px;
  padding-bottom: 56px;
  position: relative;
  min-height: 100%;
}

.home-section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.home-view.home-compact {
  gap: 12px;
}

.home-view.home-compact .home-grid {
  gap: 6px;
}

.home-view.home-compact .home-list {
  gap: 4px;
}

.home-view.home-compact .home-item {
  padding: 8px 10px;
}

.home-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.home-section-title {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-tertiary);
}

.home-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 8px;
}

.home-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.home-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-small);
  background: var(--bg-secondary);
  border: 1px solid var(--surface-border);
  color: var(--text-secondary);
  cursor: pointer;
  transition:
    background var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing),
    border-color var(--animation-duration) var(--animation-easing),
    transform var(--animation-duration) var(--animation-easing);
}

.home-item:hover {
  background: var(--hover-color);
  border-color: var(--surface-border-strong);
  color: var(--text-primary);
}

.home-item:active {
  background: var(--active-color);
  border-color: var(--surface-border-strong);
}

.home-item:focus-visible {
  background: rgba(var(--accent-rgb), 0.16);
  outline: 3px solid rgba(var(--accent-rgb), 0.6);
  outline-offset: 2px;
}

.home-item-icon {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.9;
}

.home-item-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.home-item-label {
  font-weight: 600;
  color: inherit;
}

.home-item-subtitle {
  font-size: 11px;
  color: var(--text-tertiary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.home-empty {
  padding: 6px 8px;
  font-size: 12px;
  color: var(--text-tertiary);
}

.home-recent-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-small);
  background: var(--bg-secondary);
  border: 1px solid var(--surface-border);
  color: var(--text-secondary);
  cursor: pointer;
  transition:
    background var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing),
    border-color var(--animation-duration) var(--animation-easing);
}

.home-recent-item:hover {
  background: var(--hover-color);
  border-color: var(--surface-border-strong);
  color: var(--text-primary);
}

.home-recent-main {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
  flex: 1;
}

.home-recent-pin {
  width: 28px;
  height: 28px;
  border-radius: 8px;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text-tertiary);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition:
    background var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing),
    border-color var(--animation-duration) var(--animation-easing);
  flex-shrink: 0;
}

.home-recent-pin:hover {
  background: var(--hover-color);
  border-color: var(--surface-border);
  color: var(--text-primary);
}

.home-recent-pin.active {
  color: var(--accent-color);
  border-color: color-mix(in srgb, var(--accent-color) 35%, transparent);
  background: color-mix(in srgb, var(--accent-color) 12%, transparent);
}

.home-recent-pin-icon {
  width: 14px;
  height: 14px;
  display: block;
  background-color: currentColor;
  mask: url('../assets/twemoji/1f4cc.svg') center / contain no-repeat;
  -webkit-mask: url('../assets/twemoji/1f4cc.svg') center / contain no-repeat;
}

.home-drive-card {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  border-radius: var(--radius-small);
  border: 1px solid var(--surface-border);
  background: var(--bg-secondary);
  color: var(--text-secondary);
  cursor: pointer;
  transition:
    background var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing),
    border-color var(--animation-duration) var(--animation-easing);
}

.home-drive-card:hover {
  background: var(--hover-color);
  border-color: var(--surface-border-strong);
  color: var(--text-primary);
}

.home-drive-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  color: inherit;
}

.home-drive-meta {
  font-size: 11px;
  color: var(--text-tertiary);
}

.home-drive-bar {
  height: 6px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--text-primary) 10%, transparent);
  overflow: hidden;
}

.home-drive-bar span {
  display: block;
  height: 100%;
  background: var(--accent-gradient);
  border-radius: inherit;
}

.home-customize-btn {
  position: absolute;
  right: 12px;
  bottom: 12px;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid var(--surface-border);
  background: var(--glass-bg);
  color: var(--text-secondary);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: var(--glass-shadow);
  transition:
    transform var(--animation-duration) var(--animation-easing),
    background-color var(--animation-duration) var(--animation-easing),
    border-color var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing);
  z-index: 2;
}

.home-customize-icon {
  width: 16px;
  height: 16px;
  display: block;
  background-color: currentColor;
  mask: url('../assets/twemoji/270f.svg') center / contain no-repeat;
  -webkit-mask: url('../assets/twemoji/270f.svg') center / contain no-repeat;
}

.home-customize-btn:hover {
  background: var(--hover-color);
  border-color: var(--surface-border-strong);
  color: var(--text-primary);
  transform: translateY(-1px);
}

.home-customize-btn:active {
  background: var(--active-color);
  transform: translateY(0);
}

.list-header {
  display: grid;
  grid-template-columns: var(--list-col-name) var(--list-col-type) var(--list-col-size) var(
      --list-col-modified
    );
  align-items: center;
  gap: 0;
  padding: 0 var(--list-item-padding-h);
  height: var(--list-header-height);
  position: sticky;
  top: 0;
  z-index: 5;
  background: linear-gradient(
    180deg,
    rgba(var(--bg-primary-rgb), 0.98),
    rgba(var(--bg-primary-rgb), 0.92)
  );
  border-bottom: 1px solid var(--separator);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--text-tertiary);
}

.list-header-cell {
  display: flex;
  align-items: center;
  gap: 6px;
  position: relative;
  height: 100%;
  padding: 0 6px;
  cursor: pointer;
  user-select: none;
}

.list-header-cell:hover {
  color: var(--text-secondary);
}

.list-header-sort {
  font-size: 10px;
  opacity: 0.7;
}

.list-header-resize {
  position: absolute;
  right: -6px;
  top: 4px;
  width: 12px;
  height: calc(100% - 8px);
  cursor: col-resize;
  opacity: 0;
}

.list-header-cell:hover .list-header-resize {
  opacity: 1;
}

.list-header-resize::after {
  content: '';
  position: absolute;
  right: 5px;
  top: 0;
  bottom: 0;
  width: 2px;
  border-radius: 2px;
  background: var(--separator);
}

.file-grid.list-view {
  grid-template-columns: 1fr;
  gap: 0;
  padding: 0;
}

.column-view {
  display: flex;
  flex-direction: row;
  height: 100%;
  min-height: 0;
  overflow-x: scroll;
  overflow-y: hidden;
}

.column-view::-webkit-scrollbar {
  height: 8px;
}

.column-view::-webkit-scrollbar-track {
  background: transparent;
}

.column-view::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
  border-radius: 4px;
}

.column-view::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.25);
}

.column-pane {
  display: flex;
  flex-direction: column;
  min-width: 150px;
  width: 220px;
  flex-shrink: 0;
  border-right: 1px solid rgba(255, 255, 255, 0.06);
  overflow-y: auto;
  background: rgba(255, 255, 255, 0.02);
  position: relative;
}

.column-pane:last-child {
  border-right: none;
}

.column-resize-handle {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  cursor: col-resize;
  background: transparent;
  z-index: 10;
  transition: background 0.15s ease;
}

.column-resize-handle:hover,
.column-resize-handle.resizing {
  background: var(--accent-color);
}

.column-pane:last-child .column-resize-handle {
  display: none;
}

.column-pane::-webkit-scrollbar {
  width: 6px;
}

.column-pane::-webkit-scrollbar-track {
  background: transparent;
}

.column-pane::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.column-pane::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

.column-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  cursor: pointer;
  transition: all 0.12s ease;
  border-left: 3px solid transparent;
  font-size: 12px;
}

.column-item:hover {
  background: rgba(255, 255, 255, 0.06);
}

.column-item.selected {
  background: rgba(var(--accent-rgb), 0.2);
  border-left-color: var(--accent-color);
}

.column-item.expanded {
  background: rgba(var(--accent-rgb), 0.15);
  border-left-color: var(--accent-color);
}

.column-item.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.25);
  border-left-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 1);
  box-shadow: inset 0 0 0 1px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.3);
}

.column-item.spring-loading {
  animation: spring-load-pulse 0.4s ease-in-out infinite;
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.5);
  will-change: transform, opacity;
}

body.reduce-motion .column-item.spring-loading {
  animation: none;
  box-shadow: 0 0 0 3px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.5);
  transform: none;
  will-change: auto;
}

.column-item:focus {
  outline: none;
  box-shadow: inset 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.4);
}

.column-pane.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.05);
}

.column-item-icon {
  font-size: 18px;
  flex-shrink: 0;
}

.column-item-icon img.twemoji {
  width: 18px;
  height: 18px;
}

.column-item-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.column-item-arrow {
  font-size: 10px;
  opacity: 0.5;
  flex-shrink: 0;
}

.column-item.is-directory .column-item-arrow {
  opacity: 0.7;
}

.file-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--file-item-padding-v) var(--file-item-padding-h);
  border-radius: var(--radius-small);
  cursor: pointer;
  transition: all var(--animation-duration) var(--animation-easing);
  border: 1px solid transparent;
  user-select: none;
  position: relative;
}

.file-main {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  width: 100%;
}

.file-text {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  width: 100%;
  min-width: 0;
}

.file-item.animate-in {
  animation: fileItemFadeIn 0.25s ease forwards;
  opacity: 0;
}

@keyframes fileItemFadeIn {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

body.reduce-motion .file-item.animate-in {
  animation: none;
  opacity: 1;
  transform: none;
}

.file-item:hover {
  background: var(--hover-color);
  box-shadow: none;
}

body.platform-darwin .file-item:hover {
  background: var(--hover-color);
}

body.platform-win32 .file-item:hover {
  background: var(--hover-color);
}

.file-item:active {
  background: var(--active-color);
  transform: none;
}

body.platform-darwin .file-item:active {
  background: var(--active-color);
  transform: none;
}

body.platform-win32 .file-item:active {
  background: var(--active-color);
  transform: none;
}

.file-item.selected {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.18);
  border-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.35);
  box-shadow: none;
}

body.platform-darwin .file-item.selected {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.2);
  border-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.35);
}

body.platform-win32 .file-item.selected {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.16);
  border-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.3);
}

.file-item.selected:hover {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.24);
}

.file-item:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.5);
}

.file-item:focus-visible {
  background: rgba(var(--accent-rgb), 0.12);
  box-shadow:
    0 0 0 3px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.7),
    0 0 0 5px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.2);
}

button:focus-visible,
input:focus-visible,
select:focus-visible {
  outline: 2px solid var(--accent-color);
  outline-offset: 2px;
}

.toolbar-button:focus-visible,
.nav-item:focus-visible,
.context-menu-item:focus-visible {
  background: rgba(var(--accent-rgb), 0.16);
  outline: 3px solid rgba(var(--accent-rgb), 0.6);
  outline-offset: 2px;
}

.file-item.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.2);
  border-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.5);
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.3);
  transform: none;
}

.file-grid.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.05);
  border: 2px dashed rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.4);
  border-radius: var(--radius-medium);
}

.file-view.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.03);
}

.drop-indicator {
  position: fixed;
  pointer-events: none;
  padding: 6px 10px;
  border-radius: 999px;
  background: var(--glass-modal-bg);
  border: 1px solid var(--glass-modal-border);
  color: var(--text-primary);
  font-size: 11px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.35);
  z-index: 1000;
}

.drop-indicator-action {
  padding: 2px 6px;
  border-radius: 999px;
  background: rgba(var(--accent-rgb), 0.2);
  color: var(--text-primary);
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.drop-indicator-path {
  max-width: 240px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-secondary);
}

.typeahead-indicator {
  position: fixed;
  bottom: 28px;
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 12px;
  border-radius: 999px;
  background: var(--glass-modal-bg);
  border: 1px solid var(--glass-modal-border);
  color: var(--text-primary);
  font-size: 12px;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
  z-index: 1000;
  pointer-events: none;
}

.file-item.dragging {
  opacity: 0.6;
}

body.platform-darwin .file-item.drag-over {
  transform: none;
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.35);
}

body.platform-win32 .file-item.drag-over {
  transform: none;
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.35);
}

.file-item.spring-loading {
  animation: spring-load-pulse 0.4s ease-in-out infinite;
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.5);
  will-change: transform, opacity;
}

@keyframes spring-load-pulse {
  0%,
  100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.03);
    opacity: 0.9;
  }
}

body.reduce-motion .file-item.spring-loading {
  animation: none;
  box-shadow: 0 0 0 3px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.5);
  transform: none;
  will-change: auto;
}

.git-indicator {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  opacity: 0.9;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.git-indicator.modified {
  background: #f0ad4e;
}
.git-indicator.added {
  background: #5cb85c;
}
.git-indicator.deleted {
  background: #d9534f;
}
.git-indicator.renamed {
  background: #5bc0de;
}
.git-indicator.untracked {
  background: #888;
}
.git-indicator.conflict {
  background: #d9534f;
  animation: conflict-pulse 1s infinite;
}

@keyframes conflict-pulse {
  0%,
  100% {
    opacity: 0.9;
  }
  50% {
    opacity: 0.5;
  }
}

.file-grid.list-view .git-indicator {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
}

.file-checkbox {
  position: absolute;
  top: 4px;
  left: 4px;
  width: 18px;
  height: 18px;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition:
    opacity 0.15s ease,
    background 0.15s ease,
    transform 0.15s ease;
  z-index: 5;
  cursor: pointer;
}

.file-checkbox .checkbox-mark {
  color: white;
  font-size: 11px;
  font-weight: bold;
  opacity: 0;
  transform: scale(0.5);
  transition:
    opacity 0.1s ease,
    transform 0.1s ease;
}

.file-item:hover .file-checkbox {
  opacity: 1;
}

.file-item.selected .file-checkbox {
  opacity: 1;
  background: var(--accent-color);
  border-color: var(--accent-color);
}

.file-item.selected .file-checkbox .checkbox-mark {
  opacity: 1;
  transform: scale(1);
}

.file-checkbox:hover {
  transform: scale(1.1);
  background: rgba(var(--accent-rgb), 0.3);
}

.file-item.selected .file-checkbox:hover {
  background: var(--accent-color);
  filter: brightness(1.1);
}

.file-grid.list-view .file-checkbox {
  position: static;
  margin-right: 8px;
  flex-shrink: 0;
  opacity: 0;
  transform: none;
}

.file-grid.list-view .file-item:hover .file-checkbox,
.file-grid.list-view .file-item.selected .file-checkbox {
  opacity: 1;
}

body.show-file-checkboxes .file-grid.list-view .file-checkbox {
  opacity: 1;
}

body.theme-light .file-checkbox {
  background: rgba(0, 0, 0, 0.05);
  border-color: rgba(0, 0, 0, 0.15);
}

body.theme-light .file-item.selected .file-checkbox {
  background: var(--accent-color);
  border-color: var(--accent-color);
}

body.reduce-motion .file-checkbox,
body.reduce-motion .file-checkbox .checkbox-mark {
  transition: none;
}

body:not(.show-file-checkboxes) .file-checkbox {
  display: none;
}

.file-icon {
  font-size: var(--icon-size-grid);
  margin-bottom: var(--file-icon-margin-bottom);
  filter: none;
  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.file-item:hover .file-icon {
  transform: none;
}

.file-info {
  display: none;
}

.file-name {
  font-size: var(--font-size-file-name);
  text-align: center;
  word-break: break-word;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  line-height: 1.3;
  font-weight: 400;
}

.file-item.selected .file-name {
  font-weight: 500;
}

.file-item.renaming .file-name {
  display: none;
}

.file-name-input {
  width: 100%;
  background: var(--bg-secondary);
  border: 2px solid var(--accent-color);
  border-radius: 4px;
  padding: 4px 8px;
  color: var(--text-primary);
  text-align: center;
  font-size: 12px;
  outline: none;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.file-grid.list-view .file-name-input {
  text-align: left;
}

.file-grid.list-view .file-item {
  display: grid;
  grid-template-columns: var(--list-col-name) var(--list-col-type) var(--list-col-size) var(
      --list-col-modified
    );
  align-items: center;
  column-gap: 12px;
  padding: var(--list-item-padding-v) var(--list-item-padding-h);
  border-radius: 3px;
  min-height: var(--list-item-min-height);
}

.file-grid.list-view .file-main {
  flex-direction: row;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.file-grid.list-view .file-text {
  align-items: flex-start;
  text-align: left;
}

.file-grid.list-view .file-icon {
  font-size: var(--icon-size-list);
  margin-bottom: 0;
  flex-shrink: 0;
}

.file-grid.list-view .file-name {
  text-align: left;
  flex: 1;
  -webkit-line-clamp: 1;
  line-clamp: 1;
  min-width: 0;
}

.file-grid.list-view .file-info {
  display: contents;
}

.file-grid.list-view .file-type,
.file-grid.list-view .file-size,
.file-grid.list-view .file-modified {
  font-size: var(--font-size-status);
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.file-grid.list-view .file-size,
.file-grid.list-view .file-modified {
  text-align: right;
}

.loading-spinner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 20px;
}

.spinner {
  width: var(--icon-size-spinner);
  height: var(--icon-size-spinner);
  border: 2px solid rgba(255, 255, 255, 0.12);
  border-top-color: var(--accent-color);
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 16px;
  color: var(--text-secondary);
  padding: 40px;
  text-align: center;
  animation: emptyFadeIn 0.3s ease;
}

@keyframes emptyFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.empty-icon {
  opacity: 0.6;
  filter: drop-shadow(0 0 20px rgba(0, 120, 212, 0.15));
}

.empty-icon .twemoji-xlarge {
  width: 80px;
  height: 80px;
}

.empty-state p {
  font-size: 15px;
  margin: 0;
  opacity: 0.8;
}

.empty-state .empty-hint {
  font-size: 12px;
  opacity: 0.5;
  margin-top: -8px;
}

.empty-actions {
  display: flex;
  gap: 12px;
  margin: 8px 0;
}

.empty-action-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 18px;
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  border-radius: var(--radius-medium);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.empty-action-btn:hover {
  background: var(--hover-color);
  border-color: var(--separator);
  color: var(--text-primary);
  transform: none;
  box-shadow: none;
}

.empty-action-btn:active {
  background: var(--active-color);
  transform: none;
}

.empty-action-btn .twemoji {
  width: 18px;
  height: 18px;
}

.context-menu {
  position: fixed;
  z-index: 1000;
  padding: 6px;
  min-width: 220px;
  background: var(--dropdown-bg) !important;
  border: 1px solid var(--glass-border) !important;
  border-radius: var(--radius-medium);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
  animation: menu-fade 0.15s cubic-bezier(0.33, 1, 0.68, 1);
}

@keyframes menu-fade {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.context-menu-item {
  padding: 8px 12px;
  border-radius: var(--radius-small);
  cursor: pointer;
  transition: all 0.15s cubic-bezier(0.33, 1, 0.68, 1);
  font-size: 13px;
  font-weight: 400;
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--text-primary);
}

.context-menu-shortcut {
  font-size: 11px;
  opacity: 0.5;
  margin-left: auto;
  padding-left: 20px;
  font-family: var(--font-mono);
  color: var(--text-secondary);
}

.context-menu-item:hover,
.context-menu-item.focused {
  background: rgba(var(--accent-rgb), 0.12);
  color: var(--text-primary);
  box-shadow: none;
}

.context-menu-item.focused .submenu-arrow {
  opacity: 1;
}

.context-menu-item:active {
  background: rgba(var(--accent-rgb), 0.2);
}

.context-menu-item.danger {
  color: #ff6b6b;
}

.context-menu-item.danger:hover {
  background: rgba(232, 17, 35, 0.12);
}

.context-menu-separator {
  height: 1px;
  background: var(--separator);
  margin: 4px 0;
}

.context-menu-divider {
  height: 1px;
  background: var(--separator);
  margin: 4px 0;
}

.context-menu-item.has-submenu {
  position: relative;
  padding-right: 30px;
}

.context-menu-item.has-submenu .submenu-arrow {
  position: absolute;
  right: 12px;
  opacity: 0.5;
  font-size: 10px;
}

.context-submenu {
  display: none;
  position: absolute;
  left: calc(100% - 2px);
  top: -4px;
  padding: 4px;
  min-width: 150px;
  background: var(--dropdown-bg);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
  z-index: 1001;
}

.context-submenu.flip-left {
  left: auto;
  right: calc(100% - 2px);
}

.context-menu-item.has-submenu:hover .context-submenu,
.context-submenu:hover {
  display: block;
}

.context-submenu .context-menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  transition: all 0.15s ease;
  color: var(--text-primary);
}

.context-submenu .context-menu-item:hover {
  background: var(--hover-color);
}

body.platform-darwin .context-menu {
  border-radius: 10px;
  padding: 4px;
  background: var(--dropdown-bg) !important;
  border: 1px solid var(--glass-border) !important;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
}

body.platform-darwin .context-menu-item {
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 400;
}

body.platform-darwin .context-menu-item:hover,
body.platform-darwin .context-menu-item.focused {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.18);
}

body.platform-darwin .context-menu-separator {
  margin: 4px 8px;
  background: rgba(255, 255, 255, 0.12);
}

body.platform-win32 .context-menu {
  border-radius: 8px;
  padding: 4px;
  background: var(--dropdown-bg) !important;
  border: 1px solid var(--glass-border) !important;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
}

body.platform-win32 .context-menu-item {
  padding: 10px 12px;
  border-radius: 4px;
  font-size: 14px;
}

body.platform-win32 .context-menu-item:hover,
body.platform-win32 .context-menu-item.focused {
  background: var(--hover-color);
  box-shadow: none;
}

body.platform-win32 .context-menu-item:active {
  background: var(--active-color);
}

body.platform-win32 .context-menu-separator {
  margin: 2px 0;
}

@media (max-width: 768px) {
  .sidebar {
    width: calc(var(--sidebar-width) - 20px);
  }

  .file-grid {
    grid-template-columns: repeat(auto-fill, minmax(calc(var(--grid-min-column) + 8px), 1fr));
  }
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  animation: fadeIn 0.2s cubic-bezier(0.33, 1, 0.68, 1);
}

@keyframes fadeIn {
  from {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(6px);
  }
}

.modal {
  min-width: 420px;
  max-width: 640px;
  padding: 0;
  overflow: hidden;
  animation: modalSlideIn 0.25s cubic-bezier(0.33, 1, 0.68, 1);
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.modal.glass-panel {
  background: var(--glass-modal-bg);
  border: 1px solid var(--glass-modal-border);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.45);
  border-radius: var(--radius-large);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid var(--separator);
  background: var(--bg-secondary);
  box-shadow: none;
}

.modal-header h2,
.modal-header h3 {
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  letter-spacing: -0.01em;
  color: var(--text-primary);
}

.close-button,
.modal-close {
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 20px;
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: background-color 0.12s ease;
}

.close-button:hover,
.modal-close:hover {
  background: var(--hover-color);
  color: var(--text-primary);
}

.close-button:active,
.modal-close:active {
  background: var(--active-color);
}

.modal-content {
  padding: 24px;
  max-height: 500px;
  overflow-y: auto;
}

.modal-content::-webkit-scrollbar {
  width: 6px;
}

.modal-content::-webkit-scrollbar-track {
  background: transparent;
}

.modal-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.property-row {
  display: flex;
  margin-bottom: 1px;
  font-size: 13px;
  padding: 1px 0;
  align-items: baseline;
}

.property-label {
  font-weight: 400;
  color: var(--text-secondary);
  min-width: 85px;
  margin-right: 10px;
  font-size: 13px;
  flex-shrink: 0;
}

.property-value {
  color: var(--text-primary);
  word-break: break-word;
  flex: 1;
  font-size: 13px;
}

.property-separator {
  height: 1px;
  background: var(--separator);
  margin: 4px 0;
  opacity: 0.3;
}

.property-path {
  word-break: break-all;
}

.property-value.property-checksum {
  display: flex;
  align-items: center;
  gap: 6px;
}

.property-value.property-checksum code {
  font-family: var(--font-mono);
  font-size: 11px;
  flex: 1;
  word-break: break-all;
  color: var(--text-primary);
}

.property-btn {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--separator);
  border-radius: var(--radius-small);
  padding: 2px 6px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 3px;
  transition: background 0.15s ease;
  flex-shrink: 0;
  font-size: 11px;
  font-weight: 400;
  color: var(--text-primary);
}

.property-btn:hover {
  background: rgba(255, 255, 255, 0.08);
}

.property-btn:active {
  background: rgba(255, 255, 255, 0.12);
}

.property-btn .twemoji {
  width: 14px;
  height: 14px;
}

.property-btn-cancel {
  background: rgba(232, 17, 35, 0.15);
  border-color: rgba(232, 17, 35, 0.3);
  color: #ff6b6b;
}

.property-btn-cancel:hover {
  background: rgba(232, 17, 35, 0.25);
  border-color: rgba(232, 17, 35, 0.5);
}

.property-btn-copy {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--separator);
  border-radius: var(--radius-small);
  padding: 2px 4px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease;
  flex-shrink: 0;
}

.property-btn-copy:hover {
  background: rgba(255, 255, 255, 0.08);
}

.property-btn-copy:active {
  background: rgba(255, 255, 255, 0.12);
}

.property-btn-copy .twemoji {
  width: 14px;
  height: 14px;
}

.property-progress-container {
  width: 100%;
  height: 6px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 3px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.property-progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--accent-color), var(--accent-hover));
  border-radius: 3px;
  transition: width 0.3s ease;
  width: 0%;
}

.property-progress-text {
  font-size: 11px;
  color: var(--text-secondary);
  margin-top: 6px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.folder-stats-content {
  display: flex;
  flex-direction: column;
  gap: 0px;
  max-height: 180px;
  overflow-y: auto;
  padding: 2px 0;
}

.file-type-stat {
  display: grid;
  grid-template-columns: 65px 55px 1fr;
  align-items: center;
  gap: 8px;
  padding: 1px 0;
  position: relative;
  font-size: 11px;
}

.file-type-ext {
  font-family: var(--font-mono);
  color: var(--text-primary);
  font-weight: 600;
  font-size: 11px;
}

.file-type-count {
  color: var(--text-secondary);
  font-size: 11px;
}

.file-type-size {
  color: var(--text-primary);
  text-align: right;
  font-size: 11px;
}

.file-type-bar {
  display: none;
}

.modal-footer {
  display: flex;
  flex-direction: column;
  padding: 0;
  border-top: 1px solid var(--separator);
  gap: 0;
}

.footer-top {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 25px;
  border-bottom: 1px solid var(--separator);
  background: var(--bg-secondary);
  box-shadow: none;
}

.footer-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 25px;
  gap: 15px;
}

.footer-left {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.footer-right {
  display: flex;
  gap: 10px;
  flex-shrink: 0;
}

.footer-credit {
  font-size: 11px;
  color: var(--text-secondary);
  white-space: nowrap;
}

.footer-credit strong {
  color: var(--text-primary);
  font-weight: 600;
}

.footer-version {
  font-size: 11px;
  color: var(--accent-color);
  padding: 4px 10px;
  border-radius: var(--radius-small);
  background: rgba(0, 120, 212, 0.12);
  cursor: pointer;
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  font-weight: 500;
  border: 1px solid rgba(0, 120, 212, 0.2);
}

.footer-version:hover {
  background: rgba(0, 120, 212, 0.2);
  border-color: rgba(0, 120, 212, 0.3);
  transform: translateY(-1px);
}

.footer-version:active {
  transform: translateY(0);
}

#github-btn,
#licenses-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 7px 14px;
  font-size: 12px;
  font-weight: 500;
}

#github-btn svg,
#licenses-btn svg {
  width: 14px;
  height: 14px;
  opacity: 0.9;
}

.modal-button {
  padding: 8px 20px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid var(--separator);
  border-radius: var(--radius-medium);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  font-family: var(--font-family);
}

.modal-button:hover {
  background: var(--hover-color);
  border-color: var(--separator);
  transform: none;
  box-shadow: none;
}

.modal-button:active {
  background: var(--active-color);
  transform: none;
}

.modal-button.primary {
  background: var(--accent-color);
  border-color: var(--accent-color);
  color: var(--text-primary);
  box-shadow: none;
}

.modal-button.primary:hover {
  background: var(--accent-hover);
  border-color: var(--accent-hover);
  box-shadow: none;
}

.modal-button.primary:active {
  background: var(--accent-active);
}

.modal-button#dialog-cancel {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(255, 255, 255, 0.1);
}

.modal-button#dialog-cancel:hover {
  background: rgba(255, 255, 255, 0.08);
}

#dialog-modal {
  z-index: 3000;
}

.dialog-modal {
  max-width: var(--dialog-modal-max-width);
}

.dialog-content {
  padding: 24px;
  min-height: auto;
  max-height: 300px;
}

.dialog-icon {
  font-size: 20px;
  margin-right: 8px;
}

.progress-info {
  margin-bottom: 20px;
  text-align: center;
}

.progress-file-name {
  font-size: 14px;
  color: var(--text-primary);
  margin-bottom: 8px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.progress-stats {
  font-size: 12px;
  color: var(--text-secondary);
}

.progress-bar-container {
  height: 6px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 12px;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3);
}

.progress-bar {
  height: 100%;
  background: linear-gradient(
    90deg,
    var(--accent-color) 0%,
    color-mix(in srgb, var(--accent-color) 70%, var(--accent-hover) 30%) 33%,
    color-mix(in srgb, var(--accent-color) 30%, var(--accent-hover) 70%) 66%,
    var(--accent-hover) 100%
  );
  border-radius: 3px;
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 0 8px rgba(var(--accent-rgb), 0.5);
  position: relative;
  overflow: hidden;
}

.progress-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.progress-percentage {
  text-align: center;
  font-size: 13px;
  color: var(--accent-color);
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}

.modal.settings-modal {
  max-width: var(--settings-modal-width);
  width: min(94vw, var(--settings-modal-width));
  height: min(86vh, var(--settings-modal-height));
  display: flex;
  flex-direction: column;
  background: var(--glass-bg);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

.settings-modal .modal-header {
  gap: 16px;
  justify-content: flex-start;
}

.settings-content {
  padding: 0;
  flex: 1;
  display: flex;
  overflow: hidden;
  max-height: none;
  background: var(--bg-primary);
}

.settings-sidebar {
  width: 240px;
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.03) 0%,
      rgba(255, 255, 255, 0) 30%
    ),
    var(--bg-secondary);
  border-right: 1px solid var(--separator);
  padding: 18px 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow-y: auto;
}

.settings-tab {
  background: transparent;
  border: 1px solid transparent;
  color: var(--text-secondary);
  padding: 10px 14px 10px 18px;
  text-align: left;
  cursor: pointer;
  border-radius: 8px;
  transition:
    background-color 0.15s ease,
    color 0.15s ease,
    border-color 0.15s ease;
  font-size: 14px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 10px;
  position: relative;
}

.settings-tab:hover {
  background: var(--hover-color);
  color: var(--text-primary);
}

.settings-tab.active {
  background: rgba(var(--accent-rgb), 0.16);
  color: var(--text-primary);
  border-color: rgba(var(--accent-rgb), 0.35);
}

.settings-tab::before {
  content: '';
  position: absolute;
  left: 8px;
  top: 8px;
  bottom: 8px;
  width: 3px;
  border-radius: 999px;
  background: transparent;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.settings-tab.active::before {
  background: var(--accent-color);
  opacity: 1;
}

.settings-tab:focus-visible {
  outline: none;
  border-color: rgba(var(--accent-rgb), 0.6);
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.25);
}

.settings-tab .twemoji {
  width: 18px;
  height: 18px;
  opacity: 0.8;
}

.settings-tab.active .twemoji {
  opacity: 1;
  filter: none;
}

.settings-sidebar-section {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.settings-sidebar-label {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-tertiary);
  padding: 12px 15px 6px;
  opacity: 0.7;
}

.settings-sidebar-spacer {
  flex: 1;
  min-height: 20px;
}

.settings-search-wrapper {
  position: relative;
  margin-left: auto;
  margin-right: 8px;
  flex: 1;
  max-width: 320px;
  min-width: 200px;
}

.settings-search-input {
  width: 100%;
  padding: 7px 12px 7px 32px;
  background: var(--bg-secondary);
  border: 1px solid var(--surface-border);
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 13px;
  transition:
    border-color 0.2s ease,
    box-shadow 0.2s ease,
    background-color 0.2s ease;
}

.settings-search-input:focus {
  outline: none;
  background: var(--bg-secondary);
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

.settings-search-input::placeholder {
  color: var(--text-tertiary);
}

.settings-search-icon {
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.5;
  pointer-events: none;
}

.settings-search-icon .twemoji-small {
  width: 14px;
  height: 14px;
}

.settings-pages {
  flex: 1;
  overflow-y: auto;
  padding: 0 28px 28px;
  position: relative;
  scrollbar-gutter: stable;
}

.settings-section {
  display: none;
  padding: 22px 0 0;
  border-bottom: none;
  animation: fadeIn 0.3s ease;
}

.settings-section.active {
  display: block;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.settings-section h4 {
  margin: 0 0 16px 0;
  font-size: 20px;
  font-weight: 600;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 10px;
  position: sticky;
  top: 0;
  z-index: 2;
  padding: 10px 0 12px;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--separator);
}

.settings-section h4 .twemoji {
  width: 24px;
  height: 24px;
}

.settings-card {
  background: color-mix(in srgb, var(--bg-secondary) 92%, transparent);
  border: 1px solid var(--surface-border);
  border-radius: var(--radius-medium);
  padding: 0;
  margin-bottom: 18px;
  overflow: hidden;
}

.settings-card:last-child {
  margin-bottom: 0;
}

.settings-card-header {
  font-size: 11.5px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-tertiary);
  padding: 12px 18px;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--separator);
}

.settings-card .setting-item {
  padding: 16px 18px;
  margin-bottom: 0;
  border-bottom: 1px solid var(--separator);
  transition: background-color 0.15s ease;
}

.settings-card .setting-item:last-child {
  border-bottom: none;
}

.setting-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 24px;
  margin-bottom: 15px;
}

.settings-card .setting-item:hover,
.settings-card .setting-item:focus-within {
  background: var(--hover-color);
}

.setting-item:last-child {
  margin-bottom: 0;
}

.setting-info {
  flex: 1;
}

.setting-info label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 6px;
  line-height: 1.3;
}

.setting-description {
  font-size: 13px;
  color: var(--text-secondary);
  margin: 0;
  line-height: 1.5;
}

.setting-item > .toggle-switch,
.setting-item > .settings-select,
.setting-item > .settings-input,
.setting-item > .modal-button,
.setting-item > .setting-input-group {
  margin-top: 2px;
}

.toggle-switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 26px;
  flex-shrink: 0;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--bg-secondary);
  transition: 0.3s;
  border-radius: 26px;
  border: 1px solid var(--glass-border);
}

.toggle-slider:before {
  position: absolute;
  content: '';
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: var(--text-primary);
  transition: 0.3s;
  border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
  background-color: var(--accent-color);
}

.toggle-switch input:checked + .toggle-slider:before {
  transform: translateX(24px);
}

.toggle-switch input:focus + .toggle-slider {
  box-shadow: 0 0 1px var(--accent-color);
}

body.no-transparency .glass-panel,
body.no-transparency .modal,
body.no-transparency .context-menu,
body.no-transparency .context-submenu,
body.no-transparency .zoom-popup,
body.no-transparency .archive-operations-panel {
  background: var(--bg-primary) !important;
  backdrop-filter: none !important;
  border: 1px solid var(--glass-border);
}

body.no-transparency {
  background: var(--bg-primary) !important;
}

body.no-transparency .file-view::before {
  display: none;
}

.search-bar {
  display: flex;
  align-items: center;
  padding: 0 8px;
  gap: 8px;
  width: 100%;
  height: var(--address-bar-height);
}

.search-bar input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 400;
  font-family: var(--font-family);
}

.search-bar input::placeholder {
  color: var(--text-tertiary);
}

.search-bar input::selection {
  background: var(--accent-color);
  color: var(--text-primary);
}

.search-icon {
  font-size: 14px;
  opacity: 0.5;
}

.search-close {
  background: none;
  border: none;
  color: var(--text-tertiary);
  cursor: pointer;
  font-size: 16px;
  padding: 0;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-small);
  transition: all 0.12s cubic-bezier(0.4, 0, 0.2, 1);
}

.search-close:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-primary);
}

.search-close:active {
  background: rgba(255, 255, 255, 0.12);
  transform: scale(0.9);
}

.search-scope-toggle {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-small);
  transition: all 0.12s cubic-bezier(0.4, 0, 0.2, 1);
  opacity: 0.6;
  margin-right: 4px;
}

.search-scope-toggle:hover {
  background: rgba(255, 255, 255, 0.08);
  opacity: 1;
}

.search-scope-toggle:active {
  background: rgba(255, 255, 255, 0.12);
  transform: scale(0.95);
}

.search-scope-toggle.global {
  background: var(--accent-gradient);
  opacity: 1;
}

.search-scope-toggle.global:hover {
  background: var(--accent-gradient);
  filter: brightness(1.1);
}

.search-scope-toggle .twemoji {
  width: 18px;
  height: 18px;
}

.status-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--status-bar-height);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 var(--status-bar-padding-h);
  font-size: var(--font-size-status);
  color: var(--text-secondary);
  z-index: 100;
  border-radius: 0;
  border-bottom: none;
  border-top: 1px solid var(--separator);
  background: var(--bg-secondary);
  backdrop-filter: none;
  box-shadow: none;
}

.status-left,
.status-right {
  display: flex;
  gap: 10px;
  align-items: center;
}

.status-left span,
.status-right span {
  opacity: 1;
  color: var(--text-secondary);
  font-size: var(--font-size-status);
  letter-spacing: -0.01em;
}

.status-left span:hover,
.status-right span:hover {
  color: var(--text-primary);
}

.status-item {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border-radius: 4px;
  transition: background var(--animation-duration) var(--animation-easing);
  cursor: default;
}

.status-item:hover {
  background: var(--hover-color);
}

.status-item.clickable {
  cursor: pointer;
}

.status-hidden {
  color: var(--text-secondary);
  opacity: 0.7;
  font-size: var(--font-size-status);
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 4px;
  transition: all 0.15s ease;
}

.status-hidden:hover {
  background: var(--hover-color);
  opacity: 1;
}

.status-item .twemoji {
  width: 10px;
  height: 10px;
}

.status-disk-space {
  display: flex;
  align-items: center;
  gap: 6px;
}

.status-disk-bar {
  width: 60px;
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

.status-disk-fill {
  height: 100%;
  background: var(--accent-color);
  border-radius: 2px;
  transition:
    width 0.3s ease,
    background 0.3s ease;
}

.status-disk-fill.warning {
  background: var(--warning-color);
}

.status-disk-fill.danger {
  background: var(--danger-color);
}

.status-separator {
  width: 1px;
  height: 12px;
  background: rgba(255, 255, 255, 0.1);
  opacity: 1 !important;
}

.status-version {
  font-size: 10.5px;
  font-family: var(--font-mono);
  color: var(--text-secondary) !important;
  opacity: 0.8 !important;
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  transition: all 0.2s ease;
}

.status-version:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary) !important;
}

.status-operation {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  color: var(--accent-color);
  font-size: var(--font-size-status);
}

.status-operation-spinner {
  display: inline-block;
  animation: spin 1s linear infinite;
}

.status-clipboard {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 2px var(--spacing-md);
  background: rgba(var(--accent-rgb), 0.1);
  border-radius: var(--radius-small);
  font-size: var(--font-size-status);
}

.status-clipboard .twemoji {
  width: 10px;
  height: 10px;
}

.status-view-mode {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 2px var(--spacing-md);
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-small);
  font-size: var(--font-size-status);
  font-family: var(--font-mono);
}

.status-view-mode:hover {
  background: rgba(255, 255, 255, 0.08);
}

.status-support-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: rgba(var(--accent-rgb), 0.15);
  border: none;
  border-radius: 4px;
  color: var(--accent-color);
  font-size: 10.5px;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.2s ease;
}

.status-support-btn:hover {
  background: rgba(var(--accent-rgb), 0.25);
  transform: translateY(-1px);
}

.status-support-btn:active {
  transform: translateY(0);
}

.status-support-btn .twemoji {
  width: 12px;
  height: 12px;
}

.status-search {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: rgba(var(--accent-rgb), 0.1);
  border-radius: 4px;
  font-size: 10.5px;
  color: var(--accent-color);
}

.status-search .twemoji {
  width: 11px;
  height: 11px;
  opacity: 0.9;
}

.status-git-branch {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: rgba(180, 142, 173, 0.15);
  border-radius: 4px;
  font-size: 10.5px;
  color: #b48ead;
  font-family: var(--font-mono);
  margin-right: 8px;
}

.status-git-branch .git-branch-icon {
  opacity: 0.9;
}

.folder-icon-modal {
  max-width: 440px;
}

.folder-icon-body {
  padding: 20px;
}

.folder-icon-path {
  font-size: 12px;
  color: var(--text-secondary);
  margin: 0 0 16px 0;
  word-break: break-all;
  opacity: 0.7;
}

.folder-icon-grid {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 8px;
  max-height: 300px;
  overflow-y: auto;
  padding: 4px;
}

.folder-icon-option {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-small);
  cursor: pointer;
  transition: all 0.15s ease;
  border: 2px solid transparent;
  background: rgba(255, 255, 255, 0.05);
}

.folder-icon-option:hover {
  background: rgba(255, 255, 255, 0.12);
  transform: scale(1.1);
}

.folder-icon-option.selected {
  border-color: var(--accent-color);
  background: rgba(var(--accent-rgb), 0.2);
}

.folder-icon-option .twemoji {
  width: 24px;
  height: 24px;
}

#support-popup-modal,
#tour-prompt-modal {
  background: rgba(0, 0, 0, 0.85);
}

.support-popup-modal,
.tour-prompt-modal {
  max-width: 380px;
  text-align: center;
  animation: popupSlideIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes popupSlideIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.support-popup-body,
.tour-prompt-body {
  padding: 24px 20px;
}

.support-popup-icon,
.tour-prompt-icon {
  margin-bottom: 16px;
}

.support-popup-icon .twemoji-xlarge,
.tour-prompt-icon .twemoji-xlarge {
  width: 64px;
  height: 64px;
  filter: drop-shadow(0 4px 12px rgba(255, 215, 0, 0.3));
}

.support-popup-message,
.tour-prompt-message {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.support-popup-submessage,
.tour-prompt-submessage {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.support-popup-note,
.tour-prompt-note {
  font-size: 11px;
  color: var(--text-tertiary);
  font-style: italic;
  line-height: 1.4;
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.support-popup-footer,
.tour-prompt-footer {
  justify-content: center;
  gap: 12px;
  padding: 16px 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
}

.support-popup-footer .modal-button,
.tour-prompt-footer .modal-button {
  min-width: 100px;
}

.support-popup-footer .modal-button.primary,
.tour-prompt-footer .modal-button.primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.tour-overlay {
  position: fixed;
  inset: 0;
  z-index: 3200;
  pointer-events: auto;
}

body.tour-active #command-palette-modal {
  pointer-events: none;
}

.tour-highlight {
  position: absolute;
  border-radius: 14px;
  border: 2px solid rgba(var(--accent-rgb), 0.95);
  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.65);
  transition: all 0.2s ease;
  pointer-events: none;
}

.tour-tooltip {
  position: absolute;
  max-width: 320px;
  background: var(--glass-modal-bg);
  border: 1px solid var(--glass-modal-border);
  border-radius: var(--radius-large);
  padding: 16px 18px;
  color: var(--text-primary);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(8px);
  transition:
    top 0.2s ease,
    left 0.2s ease;
}

.tour-tooltip h3 {
  margin: 8px 0 6px;
  font-size: 15px;
  font-weight: 600;
}

.tour-tooltip p {
  margin: 0;
  font-size: 12.5px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.tour-tooltip-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  font-size: 11px;
  color: var(--text-tertiary);
}

.tour-close {
  background: transparent;
  border: none;
  color: var(--text-tertiary);
  font-size: 16px;
  cursor: pointer;
  padding: 2px 4px;
}

.tour-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-top: 14px;
}

.tour-actions-left {
  display: flex;
  gap: 8px;
}

.tour-actions .modal-button.primary {
  min-width: 90px;
}

.status-path {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 10.5px;
  opacity: 0.9;
  color: var(--text-secondary);
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

#toast-container {
  position: fixed;
  top: 72px;
  right: 24px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 12px;
  pointer-events: none;
}

.toast {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  border-radius: var(--radius-large);
  padding: 14px 18px;
  min-width: 320px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
  display: flex;
  align-items: center;
  gap: 12px;
  pointer-events: all;
  animation: toastSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  color: var(--text-primary);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.toast:hover {
  transform: none;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
}

.toast:active {
  transform: none;
}

.toast.removing {
  animation: toastSlideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes toastSlideIn {
  from {
    transform: translateX(400px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes toastSlideOut {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(400px);
    opacity: 0;
  }
}

.toast-icon {
  font-size: 20px;
  flex-shrink: 0;
}

.toast-content {
  flex: 1;
}

.toast-title {
  font-weight: 600;
  margin-bottom: 2px;
  font-size: 13px;
}

.toast-message {
  font-size: 12px;
  color: var(--text-secondary);
}

.toast.success {
  border-left: 3px solid #4ade80;
}

.toast.error {
  border-left: 3px solid var(--danger-color);
}

.toast.info {
  border-left: 3px solid var(--accent-color);
}

.toast.warning {
  border-left: 3px solid #fbbf24;
}

.ui-tooltip {
  position: fixed;
  z-index: 99999;
  pointer-events: none;
  max-width: 280px;
  padding: var(--spacing-lg) var(--spacing-xxl);
  background: var(--dropdown-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-medium);
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
  font-size: 12px;
  line-height: 1.4;
  color: var(--text-primary);
  opacity: 0;
  transform: translateY(4px);
  transition:
    opacity 0.15s var(--animation-easing),
    transform 0.15s var(--animation-easing);
}

.ui-tooltip.visible {
  opacity: 1;
  transform: translateY(0);
}

.ui-tooltip-content {
  position: relative;
  z-index: 1;
}

.ui-tooltip-arrow {
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--dropdown-bg);
  border: 1px solid var(--glass-border);
  transform: rotate(45deg);
  z-index: 0;
}

.ui-tooltip.top .ui-tooltip-arrow {
  bottom: -5px;
  left: 50%;
  margin-left: -4px;
  border-top: none;
  border-left: none;
}

.ui-tooltip.bottom .ui-tooltip-arrow {
  top: -5px;
  left: 50%;
  margin-left: -4px;
  border-bottom: none;
  border-right: none;
}

.ui-tooltip.left .ui-tooltip-arrow {
  right: -5px;
  top: 50%;
  margin-top: -4px;
  border-left: none;
  border-bottom: none;
}

.ui-tooltip.right .ui-tooltip-arrow {
  left: -5px;
  top: 50%;
  margin-top: -4px;
  border-right: none;
  border-top: none;
}

.command-palette-modal {
  max-width: 640px;
  width: 90%;
  max-height: 500px;
  display: flex;
  flex-direction: column;
  padding: 0;
  margin-top: 15vh;
  animation: commandPaletteSlideIn 0.2s var(--animation-easing);
}

@keyframes commandPaletteSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.command-palette-header {
  padding: var(--spacing-xxxl);
  border-bottom: 1px solid var(--separator);
}

.command-palette-search {
  display: flex;
  align-items: center;
  gap: var(--spacing-xl);
  position: relative;
}

.command-palette-search-icon {
  color: var(--text-tertiary);
  flex-shrink: 0;
}

.command-palette-input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  color: var(--text-primary);
  font-size: 16px;
  font-weight: 400;
  padding: 0;
}

.command-palette-input::placeholder {
  color: var(--text-tertiary);
}

.command-palette-hint {
  padding: 3px var(--spacing-md);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--separator);
  border-radius: var(--radius-small);
  font-size: 10px;
  font-family: var(--font-mono);
  color: var(--text-tertiary);
  flex-shrink: 0;
}

.command-palette-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-lg);
  min-height: 200px;
}

.command-palette-section {
  margin-bottom: var(--spacing-xxxl);
}

.command-palette-section:last-child {
  margin-bottom: 0;
}

.command-palette-section-title {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-tertiary);
  padding: var(--spacing-md) var(--spacing-lg);
  margin-bottom: var(--spacing-sm);
}

.command-palette-results {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.command-palette-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-xxl);
  padding: var(--spacing-lg) var(--spacing-xxl);
  border-radius: var(--radius-small);
  cursor: pointer;
  transition: all 0.15s var(--animation-easing);
  background: transparent;
}

.command-palette-item:hover,
.command-palette-item.focused {
  background: rgba(var(--accent-rgb), 0.12);
}

.command-palette-item.focused {
  box-shadow: inset 0 0 0 1px rgba(var(--accent-rgb), 0.3);
}

.command-palette-item-left {
  display: flex;
  align-items: center;
  gap: var(--spacing-xxl);
  flex: 1;
  min-width: 0;
}

.command-palette-item-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  opacity: 0.8;
}

.command-palette-item-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.command-palette-item-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.command-palette-item-description {
  font-size: 11px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.command-palette-item-shortcut {
  display: flex;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}

.command-palette-key {
  padding: 3px var(--spacing-md);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--separator);
  border-radius: var(--radius-small);
  font-size: 10px;
  font-family: var(--font-mono);
  color: var(--text-secondary);
  min-width: 24px;
  text-align: center;
}

.command-palette-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xl);
  padding: var(--spacing-massive);
  text-align: center;
  color: var(--text-secondary);
}

.command-palette-empty .twemoji-large {
  width: 48px;
  height: 48px;
  opacity: 0.5;
}

.command-palette-empty p {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  margin: 0;
}

.command-palette-empty small {
  font-size: 12px;
  color: var(--text-tertiary);
}

.progress-panel {
  position: fixed;
  bottom: var(--spacing-massive);
  right: var(--spacing-massive);
  width: 360px;
  max-height: 400px;
  display: flex;
  flex-direction: column;
  z-index: 9000;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
  animation: progressPanelSlideIn 0.3s var(--animation-easing);
}

@keyframes progressPanelSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.progress-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-xxl) var(--spacing-xxxl);
  border-bottom: 1px solid var(--separator);
}

.progress-panel-title {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.progress-panel-icon {
  color: var(--accent-color);
}

.progress-panel-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 16px;
  padding: var(--spacing-sm);
  border-radius: var(--radius-small);
  transition: all 0.15s ease;
  line-height: 1;
}

.progress-panel-close:hover {
  background: var(--hover-color);
  color: var(--text-primary);
}

.progress-panel-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-lg);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.progress-item {
  padding: var(--spacing-xxl);
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid var(--separator);
  border-radius: var(--radius-medium);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.progress-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.progress-item-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
}

.progress-item-spinner {
  display: inline-block;
  animation: spin 1s linear infinite;
  color: var(--accent-color);
}

.progress-item-status {
  font-size: 11px;
  color: var(--text-secondary);
}

.progress-item-bar-container {
  height: 4px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 2px;
  overflow: hidden;
}

.progress-item-bar {
  height: 100%;
  background: var(--accent-color);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.progress-item.completed .progress-item-bar {
  background: var(--success-color);
}

.progress-item.error .progress-item-bar {
  background: var(--danger-color);
}

.file-hover-card {
  position: fixed;
  z-index: 9999;
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  border-radius: var(--radius-medium);
  padding: 12px;
  min-width: 220px;
  max-width: 280px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
  display: none;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s ease;
}

.file-hover-card.visible {
  display: block;
  opacity: 1;
}

body.reduce-motion .file-hover-card {
  transition: none;
}

.hover-card-thumbnail {
  width: 100%;
  height: 80px;
  margin-bottom: 10px;
  border-radius: 6px;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.05);
  display: flex;
  align-items: center;
  justify-content: center;
}

.hover-card-thumbnail img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.hover-card-thumbnail .hover-icon {
  font-size: 32px;
}

.hover-card-name {
  font-weight: 600;
  font-size: 13px;
  color: var(--text-primary);
  margin-bottom: 8px;
  word-break: break-word;
  line-height: 1.3;
}

.hover-card-details {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.hover-card-row {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  gap: 12px;
}

.hover-card-label {
  color: var(--text-secondary);
  flex-shrink: 0;
}

.hover-card-row span:last-child {
  color: var(--text-primary);
  text-align: right;
}

body.theme-light .file-hover-card {
  background: var(--bg-secondary);
  border-color: var(--separator);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

.bookmark-add-btn {
  font-size: 14px;
  line-height: 1;
}

.bookmark-item {
  display: flex;
  align-items: center;
  padding: 4px 6px;
  border-radius: var(--radius-small);
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  gap: 6px;
  color: var(--text-secondary);
  font-size: var(--font-size-nav);
}

.bookmark-item:hover {
  background: var(--hover-color);
  box-shadow: none;
  color: var(--text-primary);
}

#bookmarks-list.drag-over {
  background: rgba(var(--accent-rgb), 0.08);
  border-radius: var(--radius-small);
  padding: 4px;
}

.bookmark-item.drag-over {
  background: rgba(var(--accent-rgb), 0.2);
  box-shadow: inset 0 0 0 1px rgba(var(--accent-rgb), 0.4);
}

.bookmark-item.dragging {
  opacity: 0.6;
}

.bookmark-icon {
  font-size: 14px;
  flex-shrink: 0;
}

.bookmark-label {
  font-size: var(--font-size-nav);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.bookmark-remove {
  opacity: 0;
  background: none;
  border: none;
  color: var(--danger-color);
  cursor: pointer;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 3px;
  transition: all 0.2s ease;
}

.bookmark-item:hover .bookmark-remove {
  opacity: 1;
}

.bookmark-remove:hover {
  background: rgba(217, 115, 115, 0.2);
}

.sort-menu {
  position: fixed;
  z-index: 1000;
  min-width: 180px;
  padding: 4px;
  display: none;
  background: var(--dropdown-bg) !important;
  border: 1px solid var(--glass-border) !important;
  border-radius: var(--radius-medium);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
}

.sort-indicator {
  margin-left: auto;
  font-size: 12px;
}

.settings-select {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  border-radius: 6px;
  padding: 6px 12px;
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.settings-select:hover {
  background: var(--hover-color);
  box-shadow: none;
}

.settings-select:focus {
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

.settings-select option {
  background: var(--dropdown-bg);
  color: var(--text-primary);
}

.settings-input {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  border-radius: 6px;
  padding: 6px 12px;
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
  transition: all 0.2s ease;
}

.settings-input:hover {
  background: var(--hover-color);
  box-shadow: none;
}

.settings-input:focus {
  border-color: var(--accent-color);
  background: var(--bg-secondary);
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

.settings-input::placeholder {
  color: var(--text-secondary);
  opacity: 0.5;
}

.setting-input-group {
  display: flex;
  gap: 8px;
  align-items: center;
  flex: 1;
}

.setting-input-group .settings-input {
  flex: 1;
}

.modal-button.compact {
  padding: 8px 12px;
}

.modal-button.warning {
  background: rgba(255, 140, 0, 0.15);
  color: var(--warning-color);
  border-color: rgba(255, 140, 0, 0.3);
}

.modal-button.warning:hover {
  background: rgba(255, 140, 0, 0.25);
}

.index-status-badge {
  display: inline-block;
  padding: 2px 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  font-size: 11px;
}

.settings-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px;
  border-top: 1px solid var(--glass-border);
  background: rgba(0, 0, 0, 0.1);
}

.settings-footer-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.settings-footer-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

body.compact-ui .modal.settings-modal {
  height: min(82vh, 640px);
}

body.compact-ui .settings-sidebar {
  width: 220px;
  padding: 12px 10px;
  gap: 4px;
}

body.compact-ui .settings-tab {
  padding: 8px 10px 8px 14px;
  font-size: 12px;
  min-height: 32px;
}

body.compact-ui .settings-pages {
  padding: 0 20px 20px;
}

body.compact-ui .settings-section {
  padding-top: 16px;
}

body.compact-ui .settings-section h4 {
  margin-bottom: 12px;
  font-size: 18px;
  padding: 8px 0 10px;
}

body.compact-ui .settings-card {
  margin-bottom: 14px;
}

body.compact-ui .settings-card-header {
  padding: 10px 14px;
  font-size: 10.5px;
}

body.compact-ui .settings-card .setting-item {
  padding: 12px 14px;
}

body.compact-ui .setting-item {
  gap: 16px;
}

body.compact-ui .setting-info label {
  margin-bottom: 4px;
  font-size: 13px;
}

body.compact-ui .setting-description {
  font-size: 12px;
}

body.compact-ui .settings-modal .settings-select,
body.compact-ui .settings-modal .settings-input,
body.compact-ui .settings-modal .modal-button {
  min-height: 32px;
  padding: 6px 10px;
}

body.compact-ui .settings-footer {
  padding: 10px 16px;
}

@media (max-width: 900px) {
  .modal.settings-modal {
    width: 96vw;
    height: 90vh;
  }

  .settings-content {
    flex-direction: column;
  }

  .settings-sidebar {
    width: 100%;
    flex-direction: row;
    gap: 6px;
    padding: 10px 12px;
    border-right: none;
    border-bottom: 1px solid var(--separator);
    overflow-x: auto;
    overflow-y: hidden;
  }

  .settings-sidebar-section {
    flex-direction: row;
    gap: 6px;
    flex-shrink: 0;
  }

  .settings-sidebar-label,
  .settings-sidebar-spacer {
    display: none;
  }

  .settings-tab {
    padding: 8px 12px 8px 16px;
    font-size: 13px;
  }

  .settings-pages {
    padding: 0 20px 24px;
  }
}

@media (max-width: 700px) {
  .settings-modal .modal-header {
    flex-wrap: wrap;
  }

  .settings-search-wrapper {
    order: 3;
    width: 100%;
    max-width: none;
    min-width: 0;
    margin-left: 0;
    margin-right: 0;
  }

  .settings-modal .modal-header .modal-close {
    margin-left: auto;
  }
}

.unsaved-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--warning-color);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

.about-hero {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 24px;
  background: linear-gradient(135deg, rgba(var(--accent-rgb), 0.1), transparent);
  border-radius: 16px;
  margin-bottom: 20px;
  border: 1px solid rgba(var(--accent-rgb), 0.2);
}

.about-logo {
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.about-logo-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
}

.about-info {
  flex: 1;
}

.about-title {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 4px 0;
  color: var(--text-primary);
}

.about-version {
  font-size: 14px;
  color: var(--accent-color);
  margin: 0 0 8px 0;
  font-weight: 500;
}

.about-tagline {
  font-size: 14px;
  color: var(--text-secondary);
  margin: 0;
}

.about-credit-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

.about-credit-item:last-child {
  border-bottom: none;
}

.about-credit-label {
  font-size: 13px;
  color: var(--text-secondary);
}

.about-credit-value {
  font-size: 13px;
  color: var(--text-primary);
}

.about-link {
  color: var(--accent-color);
  text-decoration: none;
  cursor: pointer;
}

.about-link:hover {
  text-decoration: underline;
}

.about-links {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  padding: 16px;
}

.about-link-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.about-link-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--accent-color);
  transform: translateY(-1px);
}

.about-link-btn svg {
  width: 18px;
  height: 18px;
}

.about-link-btn .twemoji {
  width: 18px;
  height: 18px;
}

.about-shortcuts-hint {
  padding: 16px;
  text-align: center;
}

.about-shortcuts-hint p {
  margin: 0 0 12px 0;
  font-size: 13px;
  color: var(--text-secondary);
}

.about-shortcuts-hint kbd {
  display: inline-block;
  padding: 3px 8px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--text-primary);
}

.setting-item.search-hidden {
  display: none;
}

.setting-item.search-highlight,
.setting-item-toggle.search-highlight {
  background: rgba(var(--accent-rgb), 0.1);
  border-left: 3px solid var(--accent-color);
}

.settings-card.search-hidden {
  display: none;
}

.settings-section.search-no-results::after {
  content: 'No settings found matching your search';
  display: block;
  text-align: center;
  padding: 40px 20px;
  color: var(--text-tertiary);
  font-size: 14px;
}

body.theme-light {
  --glass-bg: rgba(255, 255, 255, 0.96);
  --glass-border: rgba(0, 0, 0, 0.08);
  --glass-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
  --text-primary: #1a1a1a;
  --text-secondary: rgba(0, 0, 0, 0.75);
  --text-tertiary: rgba(0, 0, 0, 0.55);
  --accent-color: #0066b8;
  --accent-rgb: 0, 102, 184;
  --accent-hover: #005a9e;
  --accent-active: #004a80;
  --hover-color: rgba(0, 0, 0, 0.06);
  --active-color: rgba(0, 0, 0, 0.1);
  --danger-color: #c42b2b;
  --success-color: #0d6a0d;
  --warning-color: #e67700;
  --glass-modal-bg: rgba(255, 255, 255, 0.98);
  --glass-modal-border: rgba(0, 0, 0, 0.08);
  --bg-primary: #f3f3f3;
  --bg-primary-rgb: 243, 243, 243;
  --bg-secondary: #fafafa;
  --dropdown-bg: rgba(255, 255, 255, 0.98);
  --separator: rgba(0, 0, 0, 0.1);
  --themed-icon-hue: 210deg;

  background-color: var(--bg-primary);
  background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.02), rgba(255, 255, 255, 0));
}

body.theme-light::before {
  background:
    radial-gradient(ellipse 120% 60% at 50% -20%, rgba(255, 255, 255, 0.6), transparent 60%),
    radial-gradient(ellipse 120% 60% at 50% 120%, rgba(0, 0, 0, 0.04), transparent 60%);
}

body.theme-light .glass-panel {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
}

body.theme-light .glass-input {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  color: var(--text-primary);
  box-shadow: none;
}

body.theme-light .glass-input:hover {
  background: #ffffff;
  border-color: rgba(0, 0, 0, 0.16);
}

body.theme-light .glass-input:focus {
  background: #ffffff;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

body.theme-light .titlebar {
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--separator);
  box-shadow: none;
}

body.theme-light .modal.glass-panel {
  background: var(--glass-modal-bg);
  border: 1px solid var(--glass-modal-border);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.18);
}

body.theme-light .empty-action-btn {
  background: rgba(0, 0, 0, 0.04);
  border: 1px solid rgba(0, 0, 0, 0.1);
}

body.theme-light .empty-action-btn:hover {
  background: var(--accent-color);
  border-color: var(--accent-color);
  color: var(--text-primary);
}

body.theme-light .context-menu {
  background: var(--dropdown-bg) !important;
  border: 1px solid var(--separator) !important;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

body.theme-light .context-submenu {
  background: var(--dropdown-bg) !important;
  border: 1px solid var(--separator) !important;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

body.theme-light .context-submenu .context-menu-item:hover {
  background: var(--hover-color);
}

body.theme-light .toast {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
  color: var(--text-primary);
}

body.theme-light .status-bar {
  background: var(--bg-secondary);
  backdrop-filter: none;
  border-top: 1px solid var(--separator);
}

body.theme-light .modal-header {
  border-bottom: 1px solid var(--separator);
  background: var(--bg-secondary);
}

body.theme-light .modal-footer {
  border-top: 1px solid var(--separator);
}

body.theme-light .footer-top {
  border-bottom: 1px solid var(--separator);
  background: var(--bg-secondary);
}

body.theme-light .footer-credit {
  color: rgba(0, 0, 0, 0.6);
}

body.theme-light .footer-credit strong {
  color: #1f2937;
}

body.theme-light .close-button,
body.theme-light .modal-close {
  color: var(--text-secondary);
}

body.theme-light .close-button:hover,
body.theme-light .modal-close:hover {
  background: rgba(0, 0, 0, 0.05);
  color: var(--text-primary);
}

body.theme-light .nav-item {
  color: var(--text-secondary);
}

body.theme-light .nav-item:hover {
  background: var(--hover-color);
  color: var(--text-primary);
  box-shadow: none;
}

body.theme-light .nav-item:active {
  background: var(--active-color);
}

body.theme-light .nav-item.active {
  background: rgba(var(--accent-rgb), 0.14);
  color: var(--text-primary);
  box-shadow: none;
}

body.theme-light .sidebar-section + .sidebar-section {
  border-top-color: rgba(0, 0, 0, 0.08);
}

body.theme-light .sidebar-section.primary {
  background: transparent;
  border-color: transparent;
}

body.theme-light .sidebar-empty {
  color: rgba(0, 0, 0, 0.5);
}

body.theme-light .toolbar-button {
  background: transparent;
  border: none;
}

body.theme-light .toolbar-button:hover:not(:disabled) {
  background: var(--hover-color);
  box-shadow: none;
}

body.theme-light .toolbar-button:active:not(:disabled) {
  background: var(--active-color);
}

body.theme-light .toolbar-group {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.08);
}

body.theme-light .view-options {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.08);
}

body.theme-light .view-option.active {
  background: rgba(var(--accent-rgb), 0.18);
}

body.theme-light .list-header {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(245, 245, 245, 0.96));
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

body.theme-light .drop-indicator {
  background: rgba(255, 255, 255, 0.96);
}

body.theme-light .typeahead-indicator {
  background: rgba(255, 255, 255, 0.96);
  border-color: rgba(0, 0, 0, 0.1);
}

body.theme-light .file-item:hover {
  background: var(--hover-color);
  box-shadow: none;
}

body.theme-light .file-item.selected {
  background: rgba(var(--accent-rgb), 0.16);
  border-color: rgba(var(--accent-rgb), 0.3);
  box-shadow: none;
}

body.theme-light .file-item.selected:hover {
  background: rgba(var(--accent-rgb), 0.2);
}

body.theme-light .file-item.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.2);
  border-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.4);
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.2);
}

body.theme-light .file-grid.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.03);
  border-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.25);
}

body.theme-light .file-item:focus {
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.4);
}

body.theme-light .context-menu-item {
  color: var(--text-primary);
}

body.theme-light .context-menu-item:hover,
body.theme-light .context-menu-item.focused {
  background: rgba(var(--accent-rgb), 0.14);
  color: var(--text-primary);
  box-shadow: none;
}

body.theme-light .context-menu-item:active {
  background: rgba(var(--accent-rgb), 0.2);
}

body.theme-light .context-menu-separator,
body.theme-light .context-menu-divider {
  background: var(--separator);
}

body.theme-light .modal-button {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  color: var(--text-primary);
}

body.theme-light .modal-button:hover {
  background: var(--hover-color);
  border-color: var(--separator);
  box-shadow: none;
}

body.theme-light .modal-button#dialog-cancel {
  background: var(--bg-secondary);
  border-color: var(--separator);
}

body.theme-light .modal-button#dialog-cancel:hover {
  background: var(--hover-color);
}

body.theme-light .zoom-popup {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

body.theme-light .zoom-btn {
  background: transparent;
  border: none;
}

body.theme-light .zoom-btn:hover {
  background: rgba(0, 0, 0, 0.05);
}

body.theme-light .zoom-btn .twemoji,
body.theme-light .zoom-btn .twemoji-small {
  filter: none;
}

body.theme-light .zoom-btn:active {
  background: rgba(0, 0, 0, 0.08);
}

body.theme-light .zoom-level {
  color: rgba(0, 0, 0, 0.9);
}

body.theme-light .zoom-divider {
  background: rgba(0, 0, 0, 0.08);
}

body.theme-light .archive-operations-panel {
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-shadow:
    0 16px 48px rgba(0, 0, 0, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

body.theme-light .archive-operations-header {
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
  color: var(--text-primary);
  background: rgba(0, 0, 0, 0.01);
}

body.theme-light .archive-operation-item {
  background: rgba(0, 0, 0, 0.02);
  border: 1px solid rgba(0, 0, 0, 0.06);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

body.theme-light .archive-operation-title {
  color: var(--text-primary);
}

body.theme-light .archive-operation-cancel {
  background: rgba(255, 59, 48, 0.08);
  border: 1px solid rgba(255, 59, 48, 0.2);
  color: #d32f2f;
}

body.theme-light .archive-operation-cancel:hover {
  background: rgba(255, 59, 48, 0.15);
  border-color: rgba(255, 59, 48, 0.3);
}

body.theme-light .archive-operation-file {
  color: var(--text-secondary);
}

body.theme-light .archive-operation-stats {
  color: var(--text-tertiary);
}

body.theme-light .archive-progress-bar-container {
  background: rgba(0, 0, 0, 0.06);
}

body.theme-light .archive-operations-list::-webkit-scrollbar-track {
  background: transparent;
}

body.theme-light .archive-operations-list::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .archive-operations-list::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .setting-item {
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}

body.theme-light .settings-toggle input:checked + .settings-slider {
  background-color: var(--accent-color);
}

body.theme-light .footer-version {
  background: rgba(0, 120, 212, 0.1);
  border: 1px solid rgba(0, 120, 212, 0.2);
}

body.theme-light .footer-version:hover {
  background: rgba(0, 120, 212, 0.15);
  border-color: rgba(0, 120, 212, 0.3);
}

body.theme-light .modal-content::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .modal-content::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light.no-transparency {
  background: var(--bg-primary) !important;
}

body.theme-light.no-transparency .glass-panel,
body.theme-light.no-transparency .modal,
body.theme-light.no-transparency .context-menu,
body.theme-light.no-transparency .sort-menu {
  background: var(--bg-secondary) !important;
  border: 1px solid var(--separator) !important;
}

body.theme-light.no-transparency .titlebar {
  background: var(--bg-secondary) !important;
  border-bottom: 1px solid var(--separator);
}

body.theme-light .file-view::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .file-view::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .column-view::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .column-view::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .column-pane {
  border-right: 1px solid rgba(0, 0, 0, 0.08);
  background: rgba(0, 0, 0, 0.02);
}

body.theme-light .column-pane::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.12);
}

body.theme-light .column-pane::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

body.theme-light .preview-info {
  background: rgba(0, 0, 0, 0.03);
}

body.theme-light .preview-info-item {
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}

body.theme-light .preview-text,
body.theme-light pre.preview-text {
  background: rgba(0, 0, 0, 0.04);
}

body.theme-light pre.preview-text code.hljs {
  background: transparent;
}

body.theme-light .settings-select {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  color: var(--text-primary);
  box-shadow: none;
}

body.theme-light .settings-select:hover {
  background: var(--hover-color);
  border-color: var(--separator);
}

body.theme-light .settings-input {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  color: var(--text-primary);
  box-shadow: none;
}

body.theme-light .settings-input:hover {
  background: var(--hover-color);
  border-color: var(--separator);
}

body.theme-light .settings-input:focus {
  background: #ffffff;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

body.theme-light .glass-input {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  color: var(--text-primary);
}

body.theme-light .glass-input:hover {
  background: #ffffff;
  border-color: rgba(0, 0, 0, 0.16);
}

body.theme-light .licenses-modal-content {
  background: var(--glass-modal-bg) !important;
  border: 1px solid var(--glass-modal-border);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.18);
}

body.theme-light .shortcuts-modal-content {
  background: var(--glass-modal-bg) !important;
  border: 1px solid var(--glass-modal-border);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.18);
}

body.theme-dark {
  background:
    radial-gradient(ellipse 120% 120% at 50% 50%, rgba(50, 100, 180, 0.015) 0%, transparent 50%),
    linear-gradient(
      135deg,
      #1a2332 0%,
      #1b2535 8%,
      #1c2738 16%,
      #1d293b 24%,
      #1e2b3e 32%,
      #1f2d41 40%,
      #202f44 48%,
      #213047 50%,
      #202f44 52%,
      #1f2d41 60%,
      #1e2b3e 68%,
      #1d293b 76%,
      #1c2738 84%,
      #1b2535 92%,
      #1a2332 100%
    );
  --bg-primary: #1f2d41;
  --bg-primary-rgb: 31, 45, 65;
  --bg-secondary: #263548;
  --dropdown-bg: #263548;
  --text-primary: #e8eef7;
  --text-secondary: #c5d1e3;
  --text-tertiary: #93a5be;
  --glass-bg: rgba(31, 45, 65, 0.8);
  --glass-border: rgba(232, 238, 247, 0.1);
  --themed-icon-hue: 210deg;
}

body.theme-dark::before {
  background:
    radial-gradient(ellipse 80% 60% at 20% 50%, rgba(50, 110, 200, 0.045) 0%, transparent 50%),
    radial-gradient(ellipse 70% 50% at 80% 80%, rgba(70, 130, 220, 0.035) 0%, transparent 50%),
    radial-gradient(ellipse 60% 40% at 40% 20%, rgba(60, 100, 180, 0.025) 0%, transparent 50%);
}

body.theme-dark.no-transparency {
  background: #1f2d41 !important;
}

body.theme-dark.no-transparency .glass-panel,
body.theme-dark.no-transparency .modal,
body.theme-dark.no-transparency .context-menu,
body.theme-dark.no-transparency .sort-menu {
  background: #1f2d41 !important;
  border: 1px solid rgba(255, 255, 255, 0.12) !important;
}

body.theme-dark.no-transparency .titlebar {
  background: #1f2d41 !important;
}

body.theme-dark .status-bar {
  background: rgba(31, 45, 65, 0.95);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

body.theme-dark .status-left span,
body.theme-dark .status-right span {
  color: rgba(255, 255, 255, 0.95);
}

body.theme-dark code.hljs {
  color: var(--text-primary);
  background: transparent;
}

body.theme-nord {
  --accent-color: #88c0d0;
  --accent-rgb: 136, 192, 208;
  --accent-hover: #81a1c1;
  --accent-active: #5e81ac;
  --bg-primary: #2e3440;
  --bg-primary-rgb: 46, 52, 64;
  --bg-secondary: #3b4252;
  --dropdown-bg: #3b4252;
  --text-primary: #eceff4;
  --text-secondary: #d8dee9;
  --text-tertiary: #a3be8c;
  --glass-bg: rgba(46, 52, 64, 0.8);
  --glass-border: rgba(236, 239, 244, 0.1);
  --danger-color: #bf616a;
  --success-color: #a3be8c;
  --warning-color: #ebcb8b;
  --themed-icon-hue: 190deg;
  background: linear-gradient(135deg, #2e3440 0%, #3b4252 50%, #2e3440 100%);
}

body.theme-nord .glass-panel {
  background: rgba(59, 66, 82, 0.7);
  border-color: rgba(236, 239, 244, 0.08);
}

body.theme-catppuccin {
  --accent-color: #cba6f7;
  --accent-rgb: 203, 166, 247;
  --accent-hover: #b4befe;
  --accent-active: #89b4fa;
  --bg-primary: #1e1e2e;
  --bg-primary-rgb: 30, 30, 46;
  --bg-secondary: #313244;
  --dropdown-bg: #313244;
  --text-primary: #cdd6f4;
  --text-secondary: #bac2de;
  --text-tertiary: #a6adc8;
  --glass-bg: rgba(30, 30, 46, 0.8);
  --glass-border: rgba(205, 214, 244, 0.1);
  --danger-color: #f38ba8;
  --success-color: #a6e3a1;
  --warning-color: #f9e2af;
  --themed-icon-hue: 260deg;
  background: linear-gradient(135deg, #1e1e2e 0%, #313244 50%, #1e1e2e 100%);
}

body.theme-catppuccin .glass-panel {
  background: rgba(49, 50, 68, 0.7);
  border-color: rgba(205, 214, 244, 0.08);
}

body.theme-dracula {
  --accent-color: #bd93f9;
  --accent-rgb: 189, 147, 249;
  --accent-hover: #ff79c6;
  --accent-active: #8be9fd;
  --bg-primary: #282a36;
  --bg-primary-rgb: 40, 42, 54;
  --bg-secondary: #44475a;
  --dropdown-bg: #44475a;
  --text-primary: #f8f8f2;
  --text-secondary: #f8f8f2;
  --text-tertiary: #6272a4;
  --glass-bg: rgba(40, 42, 54, 0.8);
  --glass-border: rgba(248, 248, 242, 0.1);
  --danger-color: #ff5555;
  --success-color: #50fa7b;
  --warning-color: #ffb86c;
  --themed-icon-hue: 270deg;
  background: linear-gradient(135deg, #282a36 0%, #44475a 50%, #282a36 100%);
}

body.theme-dracula .glass-panel {
  background: rgba(68, 71, 90, 0.7);
  border-color: rgba(248, 248, 242, 0.08);
}

body.theme-solarized {
  --accent-color: #268bd2;
  --accent-rgb: 38, 139, 210;
  --accent-hover: #2aa198;
  --accent-active: #859900;
  --bg-primary: #002b36;
  --bg-primary-rgb: 0, 43, 54;
  --bg-secondary: #073642;
  --dropdown-bg: #073642;
  --text-primary: #839496;
  --text-secondary: #93a1a1;
  --text-tertiary: #586e75;
  --glass-bg: rgba(0, 43, 54, 0.8);
  --glass-border: rgba(131, 148, 150, 0.1);
  --danger-color: #dc322f;
  --success-color: #859900;
  --warning-color: #b58900;
  --themed-icon-hue: 190deg;
  background: linear-gradient(135deg, #002b36 0%, #073642 50%, #002b36 100%);
}

body.theme-solarized .glass-panel {
  background: rgba(7, 54, 66, 0.7);
  border-color: rgba(131, 148, 150, 0.08);
}

body.theme-github {
  --accent-color: #58a6ff;
  --accent-rgb: 88, 166, 255;
  --accent-hover: #79c0ff;
  --accent-active: #388bfd;
  --bg-primary: #0d1117;
  --bg-primary-rgb: 13, 17, 23;
  --bg-secondary: #161b22;
  --dropdown-bg: #21262d;
  --text-primary: #c9d1d9;
  --text-secondary: #8b949e;
  --text-tertiary: #484f58;
  --glass-bg: rgba(13, 17, 23, 0.85);
  --glass-border: rgba(201, 209, 217, 0.1);
  --danger-color: #f85149;
  --success-color: #3fb950;
  --warning-color: #d29922;
  --themed-icon-hue: 210deg;
  background: linear-gradient(135deg, #0d1117 0%, #161b22 50%, #0d1117 100%);
}

body.theme-github .glass-panel {
  background: rgba(22, 27, 34, 0.75);
  border-color: rgba(201, 209, 217, 0.08);
}

body.theme-dark,
body.theme-nord,
body.theme-catppuccin,
body.theme-dracula,
body.theme-solarized,
body.theme-github {
  --hover-color: color-mix(in srgb, var(--text-primary) 6%, transparent);
  --active-color: color-mix(in srgb, var(--text-primary) 10%, transparent);
  --separator: color-mix(in srgb, var(--text-primary) 12%, transparent);
  --glass-modal-bg: rgba(var(--bg-primary-rgb), 0.98);
  --glass-modal-border: color-mix(in srgb, var(--text-primary) 12%, transparent);
}

.file-item.cut {
  opacity: 0.5;
}

.content-wrapper {
  display: flex;
  gap: 8px;
  flex: 1;
  overflow: hidden;
}

.preview-panel {
  width: var(--preview-panel-width);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  animation: slideInRight 0.3s ease-out;
}

.preview-resize-handle {
  position: absolute;
  left: -3px;
  top: 0;
  width: 6px;
  height: 100%;
  cursor: col-resize;
  background: transparent;
  z-index: 20;
}

.preview-resize-handle:hover,
.preview-resize-handle.resizing {
  background: rgba(var(--accent-rgb), 0.2);
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.preview-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid var(--separator);
  background: var(--bg-secondary);
  box-shadow: none;
}

.preview-header h3 {
  font-size: 16px;
  font-weight: 600;
  margin: 0;
}

.preview-close {
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: 20px;
  cursor: pointer;
  padding: 5px;
  border-radius: 6px;
  transition: all 0.2s;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.preview-close:hover {
  background: var(--hover-color);
}

.preview-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
}

.preview-content::-webkit-scrollbar {
  width: 6px;
}

.preview-content::-webkit-scrollbar-track {
  background: transparent;
}

.preview-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.preview-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 10px;
  color: var(--text-secondary);
  text-align: center;
}

.preview-empty-icon {
  font-size: 48px;
  opacity: 0.5;
}

.preview-empty small {
  font-size: 12px;
  opacity: 0.7;
}

.preview-image {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 15px;
  object-fit: contain;
  max-height: 300px;
}

pre.preview-text {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  padding: 15px;
  font-family: 'SF Mono', 'Fira Code', 'Courier New', monospace;
  font-size: 12px;
  line-height: 1.6;
  color: var(--text-primary);
  white-space: pre-wrap;
  word-wrap: break-word;
  max-height: 400px;
  overflow-y: auto;
  margin: 0 0 15px 0;
}

pre.preview-text code {
  background: transparent;
  padding: 0;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

pre.preview-text code.hljs {
  background: transparent;
  padding: 0;
}

.preview-text:not(pre) {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  padding: 15px;
  font-family: 'SF Mono', 'Fira Code', 'Courier New', monospace;
  font-size: 12px;
  line-height: 1.6;
  color: var(--text-primary);
  white-space: pre-wrap;
  word-wrap: break-word;
  max-height: 400px;
  overflow-y: auto;
  margin-bottom: 15px;
}

.preview-info {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  padding: 15px;
}

.preview-info-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  font-size: 13px;
  min-width: 0;
  overflow: hidden;
}

.preview-info-item:last-child {
  border-bottom: none;
}

.preview-info-label {
  color: var(--text-secondary);
  font-weight: 500;
}

.preview-info-value {
  color: var(--text-primary);
  text-align: right;
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  word-break: break-all;
}

.preview-truncated {
  background: rgba(255, 165, 0, 0.1);
  border: 1px solid rgba(255, 165, 0, 0.3);
  border-radius: 6px;
  padding: 8px 12px;
  margin-bottom: 15px;
  font-size: 12px;
  color: #ffa500;
  text-align: center;
}

.preview-error {
  background: rgba(217, 115, 115, 0.1);
  border: 1px solid var(--danger-color);
  border-radius: 6px;
  padding: 15px;
  margin-bottom: 15px;
  font-size: 13px;
  color: var(--danger-color);
  text-align: center;
}

.archive-info {
  padding: 10px 0;
  font-size: 12px;
  color: var(--text-secondary);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 10px;
}

.archive-list {
  max-height: 400px;
  overflow-y: auto;
}

.archive-entry {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 4px;
  font-size: 12px;
  transition: background 0.15s ease;
}

.archive-entry:hover {
  background: rgba(255, 255, 255, 0.05);
}

.archive-icon {
  font-size: 14px;
  flex-shrink: 0;
}

.archive-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.archive-size {
  font-size: 11px;
  color: var(--text-secondary);
  flex-shrink: 0;
}

.archive-more {
  padding: 10px;
  text-align: center;
  font-size: 12px;
  color: var(--text-secondary);
  font-style: italic;
}

.preview-unsupported {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  padding: 30px;
  text-align: center;
  color: var(--text-secondary);
}

.preview-unsupported-icon {
  font-size: 64px;
  opacity: 0.3;
}

.preview-raw-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  padding: 30px;
  text-align: center;
  background: linear-gradient(135deg, rgba(40, 40, 50, 0.6) 0%, rgba(30, 30, 40, 0.8) 100%);
  border-radius: 12px;
  margin-bottom: 15px;
}

.preview-raw-icon {
  font-size: 64px;
}

.preview-raw-details {
  color: var(--text-secondary);
}

.preview-raw-details strong {
  display: block;
  font-size: 18px;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.preview-raw-note {
  font-size: 12px;
  opacity: 0.7;
  margin-top: 10px;
}

.quicklook-modal {
  min-width: 600px;
  max-width: 90vw;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.quicklook-content {
  max-height: 70vh;
  overflow: auto;
  padding: 20px;
}

.quicklook-content img {
  max-width: 100%;
  max-height: 60vh;
  object-fit: contain;
  border-radius: 8px;
}

.quicklook-content .preview-text {
  max-height: 60vh;
}

.preview-video {
  max-width: 100%;
  max-height: 60vh;
  border-radius: 8px;
  background: #000;
}

.preview-audio-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px;
  gap: 30px;
}

.preview-audio-icon {
  font-size: 80px;
  opacity: 0.8;
}

.preview-audio-icon .twemoji-large {
  width: 80px;
  height: 80px;
}

.preview-audio {
  width: 100%;
  max-width: 400px;
}

.preview-pdf {
  width: 100%;
  height: 60vh;
  border: none;
  border-radius: 8px;
}

.preview-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 50px;
  gap: 20px;
}

#quicklook-info {
  font-size: 12px;
  color: var(--text-secondary);
}

.file-item.has-thumbnail .file-icon {
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.2);
}

.file-thumbnail {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 6px;
}

.file-grid.list-view .file-item.has-thumbnail .file-icon {
  width: 40px;
  height: 40px;
  min-width: 40px;
  border-radius: 4px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.file-grid.list-view .file-item.has-thumbnail .file-thumbnail {
  border-radius: 4px;
}

.file-thumbnail[data-animated='true'] {
  transition: transform 0.15s ease;
}

.file-thumbnail[data-animated='true']:hover {
  transform: scale(1.02);
}

.file-item.has-thumbnail[data-thumbnail-type='audio'] .file-icon {
  background: linear-gradient(135deg, rgba(30, 30, 40, 0.9) 0%, rgba(40, 40, 55, 0.9) 100%);
}

.file-item.has-thumbnail[data-thumbnail-type='audio'] .file-thumbnail {
  object-fit: contain;
}

@media (max-width: 1200px) {
  .preview-panel {
    width: 260px;
  }
}

@media (max-width: 900px) {
  .preview-panel {
    display: none !important;
  }
}

.licenses-modal-content {
  width: 90%;
  max-width: 900px;
  max-height: 85vh;
  background: var(--glass-modal-bg) !important;
  border: 1px solid var(--glass-modal-border);
  border-radius: 16px;
  overflow: hidden;
}

.licenses-modal-body {
  max-height: calc(85vh - 180px);
  overflow-y: auto;
  padding: 24px;
}

.licenses-intro {
  margin-bottom: 24px;
  padding: 16px;
  background: rgba(123, 97, 255, 0.1);
  border-radius: 8px;
  border-left: 3px solid var(--accent-color);
}

.licenses-intro p {
  margin: 0;
  color: var(--text-secondary);
  line-height: 1.6;
}

.licenses-content {
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 12px;
  line-height: 1.6;
  white-space: pre-wrap;
  word-wrap: break-word;
  color: var(--text-primary);
}

.license-package {
  margin-bottom: 32px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.02);
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.license-package-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--accent-color);
  margin-bottom: 8px;
  font-family: var(--font-family);
}

.license-package-info {
  display: flex;
  gap: 16px;
  margin-bottom: 12px;
  font-size: 12px;
  color: var(--text-secondary);
}

.license-link {
  color: var(--accent-color);
  text-decoration: none;
}

.license-link:hover {
  text-decoration: underline;
}

.license-package-license {
  display: inline-block;
  padding: 2px 8px;
  background: rgba(123, 97, 255, 0.2);
  border-radius: 4px;
  font-weight: 500;
}

.license-package-text {
  margin-top: 12px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
  font-size: 11px;
  max-height: 200px;
  overflow-y: auto;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.shortcuts-modal-content {
  width: 90%;
  max-width: 800px;
  max-height: 85vh;
  background: var(--glass-modal-bg) !important;
  border: 1px solid var(--glass-modal-border);
  border-radius: 16px;
  overflow: hidden;
}

.shortcuts-modal-body {
  max-height: calc(85vh - 180px);
  overflow-y: auto;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.shortcuts-section {
  background: rgba(255, 255, 255, 0.02);
  padding: 20px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.shortcuts-section h3 {
  margin: 0 0 16px 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--accent-color);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding-bottom: 8px;
}

.shortcut-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
}

.shortcut-item:last-child {
  border-bottom: none;
}

.shortcut-description {
  color: var(--text-primary);
  font-size: 14px;
}

.shortcut-keys {
  display: flex;
  gap: 6px;
  align-items: center;
  font-size: 13px;
  color: var(--text-secondary);
}

.shortcut-keys kbd {
  display: inline-block;
  padding: 4px 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  font-family: 'Segoe UI', 'Roboto', sans-serif;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  min-width: 24px;
  text-align: center;
}

.shortcuts-note {
  background: rgba(123, 97, 255, 0.1);
  padding: 16px;
  border-radius: 8px;
  border-left: 3px solid var(--accent-color);
}

.shortcuts-note p {
  margin: 0;
  color: var(--text-secondary);
  font-size: 13px;
  line-height: 1.6;
}

.shortcuts-note kbd {
  display: inline-block;
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  font-size: 11px;
  font-weight: 500;
  margin: 0 2px;
}

.zoom-popup {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  background: var(--bg-secondary);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  border: 1px solid var(--separator);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
  z-index: 2500;
  animation: zoomPopupSlideIn 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes zoomPopupSlideIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

.zoom-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: 1px solid var(--separator);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  padding: 0;
}

.zoom-btn:hover {
  background: var(--hover-color);
  border-color: var(--separator);
  transform: none;
  box-shadow: none;
}

.zoom-btn:active {
  transform: none;
  background: var(--active-color);
}

.zoom-btn .twemoji {
  width: 16px;
  height: 16px;
  filter: brightness(0) invert(1);
}

.zoom-btn .twemoji-small {
  width: 14px;
  height: 14px;
  filter: brightness(0) invert(1);
}

.zoom-level {
  min-width: 50px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.95);
  user-select: none;
  font-variant-numeric: tabular-nums;
}

.zoom-divider {
  width: 1px;
  height: 20px;
  background: rgba(255, 255, 255, 0.2);
  margin: 0 4px;
}

.archive-operations-panel {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 350px;
  max-height: 400px;
  background: var(--bg-secondary);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  border: 1px solid var(--separator);
  border-radius: var(--radius-large);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
  z-index: 2000;
  overflow: hidden;
  animation: slideInFromRight 0.3s cubic-bezier(0.33, 1, 0.68, 1);
}

@keyframes slideInFromRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.archive-operations-header {
  padding: 14px 16px;
  border-bottom: 1px solid var(--separator);
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-primary);
}

.archive-operations-list {
  max-height: 340px;
  overflow-y: auto;
  padding: 12px;
}

.archive-operations-list::-webkit-scrollbar {
  width: 8px;
}

.archive-operations-list::-webkit-scrollbar-track {
  background: transparent;
}

.archive-operations-list::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
  border-radius: 4px;
}

.archive-operations-list::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.25);
}

.archive-operation-item {
  background: var(--bg-primary);
  border: 1px solid var(--separator);
  border-radius: var(--radius-medium);
  padding: 12px;
  margin-bottom: 8px;
  animation: fadeIn 0.2s cubic-bezier(0.33, 1, 0.68, 1);
  box-shadow: none;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.archive-operation-item:last-child {
  margin-bottom: 0;
}

.archive-operation-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.archive-operation-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.9);
  flex: 1;
  min-width: 0;
}

.archive-operation-title .twemoji {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.archive-operation-name {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.archive-operation-cancel {
  background: rgba(255, 59, 48, 0.15);
  border: 1px solid rgba(255, 59, 48, 0.3);
  border-radius: 6px;
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 600;
  color: #ff6b6b;
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.archive-operation-cancel:hover {
  background: rgba(255, 59, 48, 0.25);
  border-color: rgba(255, 59, 48, 0.5);
}

.archive-operation-cancel:active {
  transform: scale(0.95);
}

.archive-operation-file {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.6);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 6px;
}

.archive-operation-stats {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 8px;
}

.archive-progress-bar-container {
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

.archive-progress-bar {
  height: 100%;
  background: linear-gradient(
    90deg,
    var(--accent-color) 0%,
    color-mix(in srgb, var(--accent-color) 70%, var(--accent-light) 30%) 33%,
    color-mix(in srgb, var(--accent-color) 30%, var(--accent-light) 70%) 66%,
    var(--accent-light) 100%
  );
  border-radius: 2px;
  transition: width 0.3s ease;
  position: relative;
  overflow: hidden;
}

.archive-progress-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.preview-video {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 15px;
  max-height: 300px;
  background: #000;
}

.preview-audio-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 15px;
  padding: 20px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
}

.preview-audio-icon {
  font-size: 48px;
  margin-bottom: 15px;
}

.preview-audio {
  width: 100%;
}

.preview-pdf {
  width: 100%;
  height: 400px;
  border-radius: 8px;
  margin-bottom: 15px;
  border: none;
  background: #fff;
}

.theme-editor-modal {
  width: 580px;
  max-width: 95vw;
}

.theme-editor-body {
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
}

.theme-editor-preview {
  --surface-border: color-mix(
    in srgb,
    var(--custom-text-primary, var(--text-primary)) 12%,
    transparent
  );
  --surface-border-strong: color-mix(
    in srgb,
    var(--custom-text-primary, var(--text-primary)) 18%,
    transparent
  );
  background: var(--custom-bg-primary, var(--bg-primary));
  border-radius: var(--radius-medium);
  overflow: hidden;
  border: 1px solid var(--surface-border);
  min-height: 160px;
}

.theme-editor-preview {
  position: relative;
}

.theme-editor-preview .preview-titlebar {
  background: var(--custom-bg-secondary, var(--bg-secondary));
  padding: 8px 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--surface-border);
}

.theme-editor-preview .preview-title {
  font-size: 12px;
  color: var(--custom-text-secondary, var(--text-secondary));
}

.theme-editor-preview .preview-controls {
  display: flex;
  gap: 6px;
}

.theme-editor-preview .preview-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--custom-text-secondary, var(--text-secondary));
  opacity: 0.3;
}

.theme-editor-preview .preview-sidebar {
  position: absolute;
  left: 0;
  top: 34px;
  bottom: 0;
  width: 120px;
  background: var(--custom-glass-bg, rgba(255, 255, 255, 0.03));
  border-right: 1px solid var(--surface-border);
  padding: 8px;
}

.theme-editor-preview .preview-sidebar-item {
  padding: 6px 8px;
  font-size: 11px;
  border-radius: 4px;
  color: var(--custom-text-primary, var(--text-primary));
  cursor: default;
  margin-bottom: 2px;
}

.theme-editor-preview .preview-sidebar-item.active {
  background: var(--custom-accent-color, var(--accent-color));
  color: var(--custom-text-primary, var(--text-primary));
}

.theme-editor-preview .preview-content {
  margin-left: 120px;
  padding: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.theme-editor-preview .preview-file {
  padding: 8px 12px;
  font-size: 11px;
  border-radius: 6px;
  color: var(--custom-text-primary, var(--text-primary));
  background: var(--custom-glass-bg, rgba(255, 255, 255, 0.03));
  border: 1px solid var(--surface-border);
  cursor: default;
}

.theme-editor-preview .preview-file.selected {
  background: rgba(var(--custom-accent-rgb, var(--accent-rgb)), 0.2);
  border-color: var(--custom-accent-color, var(--accent-color));
}

.theme-editor-controls {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.theme-color-row {
  display: flex;
  gap: 16px;
}

.theme-color-group {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.theme-color-group label {
  font-size: 12px;
  color: var(--text-secondary);
  font-weight: 500;
}

.theme-editor-controls .glass-input {
  color: var(--text-primary);
  background: var(--bg-secondary);
  padding: 8px 12px;
  border-color: var(--surface-border);
}

.color-input-wrapper {
  display: flex;
  gap: 8px;
  align-items: center;
}

.color-input-wrapper input[type='color'] {
  width: 36px;
  height: 36px;
  border: none;
  border-radius: var(--radius-small);
  cursor: pointer;
  padding: 0;
  background: transparent;
}

.color-input-wrapper input[type='color']::-webkit-color-swatch-wrapper {
  padding: 2px;
}

.color-input-wrapper input[type='color']::-webkit-color-swatch {
  border-radius: 4px;
  border: 1px solid var(--surface-border);
}

.color-text {
  flex: 1;
  font-family: var(--font-mono);
  font-size: 12px;
  text-transform: uppercase;
  color: var(--text-primary);
  background: var(--bg-secondary);
  border: 1px solid var(--surface-border);
  padding: 8px 10px;
  border-radius: var(--radius-small);
}

.color-text:focus {
  border-color: var(--accent-color);
  outline: none;
}

.color-text.invalid {
  border-color: #e81123;
  background: rgba(232, 17, 35, 0.1);
}

.theme-presets {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.theme-presets label {
  font-size: 12px;
  color: var(--text-secondary);
}

.preset-buttons {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.preset-btn {
  padding: 8px 12px;
  border: 1px solid var(--surface-border);
  border-radius: var(--radius-small);
  background: var(--glass-bg);
  cursor: pointer;
  font-size: 11px;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: all 0.15s ease;
  color: var(--text-secondary);
}

.preset-btn .twemoji {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.preset-btn span {
  white-space: nowrap;
}

.preset-btn:hover {
  background: var(--hover-color);
  border-color: var(--surface-border-strong);
  color: var(--text-primary);
}

.preset-btn:active {
  background: var(--active-color);
}

.home-settings-modal {
  width: 520px;
  max-width: 92vw;
}

.home-settings-body {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px 16px 16px;
  max-height: 70vh;
  overflow-y: auto;
}

.home-settings-body .settings-card {
  flex-shrink: 0;
}

.home-settings-row {
  display: flex;
  gap: 12px;
}

.home-settings-card-sections {
  flex: 1;
  min-width: 0;
}

.home-settings-card-order {
  width: 180px;
  flex-shrink: 0;
}

.home-toggle-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 6px;
  padding: 10px 14px 12px;
}

.home-toggle-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: var(--radius-small);
  border: 1px solid var(--surface-border);
  background: var(--bg-primary);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition:
    border-color var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing),
    background-color var(--animation-duration) var(--animation-easing);
}

.home-toggle-item:hover {
  border-color: var(--surface-border-strong);
  color: var(--text-primary);
  background: var(--hover-color);
}

.home-toggle-item input {
  accent-color: var(--accent-color);
  margin: 0;
}

.home-section-order {
  display: flex;
  flex-direction: column;
  padding: 4px 0;
}

.home-section-order-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  border-bottom: 1px solid var(--separator);
  color: var(--text-secondary);
  cursor: grab;
  user-select: none;
}

.home-section-order-item:last-child {
  border-bottom: none;
}

.home-section-order-item.dragging {
  opacity: 0.5;
}

.home-section-order-handle {
  width: 16px;
  height: 16px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  border: 1px solid var(--surface-border);
  color: var(--text-tertiary);
  font-size: 10px;
}

.home-section-order-label {
  font-size: 11px;
  letter-spacing: 0.02em;
}

.home-option.dragging {
  opacity: 0.5;
}

.home-options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 6px;
  padding: 10px 14px 12px;
}

.home-option {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 8px;
  border-radius: var(--radius-small);
  border: 1px solid var(--surface-border);
  background: var(--bg-primary);
  color: var(--text-secondary);
  font-size: 11px;
  line-height: 1.3;
  min-height: 26px;
  cursor: grab;
  transition:
    border-color var(--animation-duration) var(--animation-easing),
    color var(--animation-duration) var(--animation-easing),
    background-color var(--animation-duration) var(--animation-easing);
}

.home-option input {
  accent-color: var(--accent-color);
  margin: 0;
}

.home-option:hover {
  border-color: var(--surface-border-strong);
  color: var(--text-primary);
  background: var(--hover-color);
}

.home-option .twemoji {
  width: 13px;
  height: 13px;
}

.home-settings-footer {
  flex-direction: row;
  justify-content: flex-end;
  gap: 8px;
  padding: 10px 16px;
  background: var(--bg-secondary);
}

@media (max-width: 520px) {
  .home-settings-row {
    flex-direction: column;
  }

  .home-settings-card-order {
    width: 100%;
  }

  .home-toggle-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

body.theme-custom {
  --accent-color: var(--custom-accent-color, #0078d4);
  --accent-rgb: var(--custom-accent-rgb, 0, 120, 212);
  --bg-primary: var(--custom-bg-primary, #1a1a1a);
  --bg-primary-rgb: var(--custom-bg-primary-rgb, 26, 26, 26);
  --bg-secondary: var(--custom-bg-secondary, #252525);
  --text-primary: var(--custom-text-primary, #ffffff);
  --text-secondary: var(--custom-text-secondary, rgba(255, 255, 255, 0.75));
  --glass-bg: var(--custom-glass-bg, rgba(255, 255, 255, 0.03));
  --glass-border: var(--custom-glass-border, rgba(255, 255, 255, 0.08));
}

body.theme-custom {
  background-color: var(--custom-bg-primary, #1a1a1a);
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    transition-delay: 0ms !important;
  }
}

body.reduce-motion,
body.reduce-motion *,
body.reduce-motion *::before,
body.reduce-motion *::after {
  animation-duration: 0.001ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.001ms !important;
  transition-delay: 0ms !important;
}

body.high-contrast {
  --text-secondary: rgba(255, 255, 255, 0.95) !important;
  --text-tertiary: rgba(255, 255, 255, 0.85) !important;
  --glass-border: rgba(255, 255, 255, 0.35) !important;
  --separator: rgba(255, 255, 255, 0.3) !important;
}

body.high-contrast .setting-description,
body.high-contrast .section-title,
body.high-contrast .nav-label,
body.high-contrast .status-bar,
body.high-contrast .file-item-details,
body.high-contrast .breadcrumb-separator,
body.high-contrast .modal-footer,
body.high-contrast .preview-empty p,
body.high-contrast .about-tagline,
body.high-contrast .filter-hint {
  opacity: 1 !important;
  color: var(--text-secondary) !important;
}

body.high-contrast .glass-panel {
  border-width: 2px !important;
  border-color: var(--glass-border) !important;
}

:root {
  --system-font-scale: 1;
}

body.use-system-font-size {
  font-size: calc(13px * var(--system-font-scale)) !important;
}

body.use-system-font-size .file-item-name,
body.use-system-font-size .nav-label,
body.use-system-font-size .section-title,
body.use-system-font-size .setting-description,
body.use-system-font-size .settings-tab,
body.use-system-font-size .context-menu-item,
body.use-system-font-size .breadcrumb-item,
body.use-system-font-size .tab-title,
body.use-system-font-size .status-bar,
body.use-system-font-size .modal-button,
body.use-system-font-size input,
body.use-system-font-size select,
body.use-system-font-size button {
  font-size: calc(12px * var(--system-font-scale)) !important;
}

body.use-system-font-size .setting-info label,
body.use-system-font-size .settings-card-header,
body.use-system-font-size .modal-header h3,
body.use-system-font-size h4 {
  font-size: calc(14px * var(--system-font-scale)) !important;
}

body.large-text {
  font-size: 16px !important;
}

body.large-text .file-item-name,
body.large-text .nav-label,
body.large-text .section-title,
body.large-text .setting-description,
body.large-text .settings-tab,
body.large-text .context-menu-item,
body.large-text .breadcrumb-item,
body.large-text .tab-title,
body.large-text .status-bar,
body.large-text .modal-button,
body.large-text input,
body.large-text select,
body.large-text button {
  font-size: 14px !important;
}

body.large-text .setting-info label,
body.large-text .settings-card-header,
body.large-text .modal-header h3,
body.large-text h4 {
  font-size: 16px !important;
}

body.large-text .shortcut-description,
body.large-text .shortcut-keys {
  font-size: 14px !important;
}

body.bold-text,
body.bold-text * {
  font-weight: 500 !important;
}

body.bold-text .file-item-name,
body.bold-text .nav-label,
body.bold-text .breadcrumb-item,
body.bold-text .modal-header h3,
body.bold-text .settings-card-header,
body.bold-text .setting-info label,
body.bold-text h3,
body.bold-text h4 {
  font-weight: 700 !important;
}

body.bold-text .setting-description,
body.bold-text .section-title {
  font-weight: 600 !important;
}

body.visible-focus *:focus {
  outline: 3px solid var(--accent-color) !important;
  outline-offset: 2px !important;
}

body.visible-focus button:focus,
body.visible-focus input:focus,
body.visible-focus select:focus,
body.visible-focus a:focus,
body.visible-focus .file-item:focus,
body.visible-focus .nav-item:focus,
body.visible-focus .tab-item:focus,
body.visible-focus .settings-tab:focus,
body.visible-focus .context-menu-item:focus {
  outline: 3px solid var(--accent-color) !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 6px rgba(var(--accent-rgb), 0.3) !important;
}

body.reduce-transparency .glass-panel {
  background: var(--bg-secondary) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

body.reduce-transparency .modal-overlay {
  background: rgba(0, 0, 0, 0.9) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

body.reduce-transparency .modal {
  background: var(--bg-secondary) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

body.reduce-transparency .glass-input,
body.reduce-transparency .address-bar,
body.reduce-transparency .search-bar {
  background: var(--bg-primary) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

body.reduce-transparency .context-menu,
body.reduce-transparency .sort-menu {
  background: var(--bg-secondary) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

body.reduce-transparency .history-dropdown {
  background: var(--bg-secondary) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

body.reduce-transparency .titlebar {
  background: var(--bg-secondary) !important;
}

body.reduce-transparency .tab-bar {
  background: var(--bg-secondary) !important;
}

body.reduce-transparency .status-bar {
  background: var(--bg-secondary) !important;
}

body.reduce-transparency .sidebar {
  background: var(--bg-secondary) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

body.reduce-transparency .toolbar {
  background: var(--bg-secondary) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}
