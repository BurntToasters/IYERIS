body.theme-light .selection-indicator {
  background: rgba(var(--accent-rgb), 0.1);
}

body.theme-light .selection-action {
  background: rgba(0, 0, 0, 0.05);
}

body.theme-light .selection-action:hover {
  background: rgba(0, 0, 0, 0.1);
}

body.theme-light .file-checkbox {
  background: rgba(0, 0, 0, 0.05);
  border-color: rgba(0, 0, 0, 0.15);
}

body.theme-light .file-item.selected .file-checkbox {
  background: var(--accent-color);
  border-color: var(--accent-color);
}

body.theme-light .file-hover-card {
  background: var(--bg-secondary);
  border-color: var(--separator);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

body.theme-light {
  --glass-bg: rgba(255, 255, 255, 0.96);
  --glass-border: rgba(0, 0, 0, 0.08);
  --glass-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
  --text-primary: #1a1a1a;
  --text-secondary: rgba(0, 0, 0, 0.75);
  --text-tertiary: rgba(0, 0, 0, 0.65);
  --accent-color: #0066b8;
  --accent-rgb: 0, 102, 184;
  --accent-hover: #005a9e;
  --accent-active: #004a80;
  --hover-color: rgba(0, 0, 0, 0.06);
  --active-color: rgba(0, 0, 0, 0.1);
  --danger-color: #c42b2b;
  --success-color: #0d6a0d;
  --warning-color: #e67700;
  --glass-modal-bg: rgba(255, 255, 255, 0.98);
  --glass-modal-border: rgba(0, 0, 0, 0.08);
  --bg-primary: #f3f3f3;
  --bg-primary-rgb: 243, 243, 243;
  --bg-secondary: #fafafa;
  --dropdown-bg: rgba(255, 255, 255, 0.98);
  --separator: rgba(0, 0, 0, 0.1);
  --surface-0: var(--bg-primary);
  --surface-1: var(--bg-secondary);
  --surface-2: color-mix(in srgb, #ffffff 92%, var(--bg-secondary));
  --surface-overlay: var(--glass-bg);
  --panel-border: color-mix(in srgb, #000 12%, transparent);
  --panel-border-strong: color-mix(in srgb, #000 22%, transparent);
  --interactive-hover: var(--hover-color);
  --interactive-active: var(--active-color);
  --interactive-selected: rgba(var(--accent-rgb), 0.18);
  --interactive-selected-border: rgba(var(--accent-rgb), 0.38);
  --themed-icon-hue: 210deg;

  background-color: var(--bg-primary);
  background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.02), rgba(255, 255, 255, 0));
}

body.theme-light::before {
  background:
    radial-gradient(ellipse 120% 60% at 50% -20%, rgba(255, 255, 255, 0.6), transparent 60%),
    radial-gradient(ellipse 120% 60% at 50% 120%, rgba(0, 0, 0, 0.04), transparent 60%);
}

body.theme-light .glass-panel {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
}

body.theme-light .glass-input {
  background: var(--bg-secondary);
  border: 1px solid var(--separator);
  color: var(--text-primary);
  box-shadow: none;
}

body.theme-light .glass-input:hover {
  background: #ffffff;
  border-color: rgba(0, 0, 0, 0.16);
}

body.theme-light .glass-input:focus {
  background: #ffffff;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

body.theme-light .titlebar {
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--separator);
  box-shadow: none;
}

body.theme-light .empty-action-btn {
  background: rgba(0, 0, 0, 0.04);
  border: 1px solid rgba(0, 0, 0, 0.1);
}

body.theme-light .empty-action-btn:hover {
  background: var(--accent-color);
  border-color: var(--accent-color);
  color: var(--text-primary);
}

body.theme-light .context-submenu {
  background: var(--dropdown-bg) !important;
  border: 1px solid var(--separator) !important;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

body.theme-light .status-bar {
  background: var(--bg-secondary);
  backdrop-filter: none;
  border-top: 1px solid var(--separator);
}

body.theme-light .footer-credit {
  color: rgba(0, 0, 0, 0.6);
}

body.theme-light .footer-credit strong {
  color: #1f2937;
}

body.theme-light .nav-item {
  color: var(--text-secondary);
}

body.theme-light .nav-item:hover {
  background: var(--hover-color);
  color: var(--text-primary);
  box-shadow: none;
}

body.theme-light .nav-item:active {
  background: var(--active-color);
}

body.theme-light .nav-item.active {
  background: var(--accent-light);
  color: var(--text-primary);
  box-shadow: inset 0 0 0 1px var(--accent-strong);
}

body.theme-light .sidebar-section + .sidebar-section {
  border-top-color: rgba(0, 0, 0, 0.08);
}

body.theme-light .sidebar-section.primary {
  background: transparent;
  border-color: transparent;
}

body.theme-light .sidebar-empty {
  color: rgba(0, 0, 0, 0.5);
}

body.theme-light .toolbar-button {
  background: transparent;
  border: none;
}

body.theme-light .toolbar-button:hover:not(:disabled) {
  background: var(--hover-color);
  box-shadow: none;
}

body.theme-light .toolbar-button:active:not(:disabled) {
  background: var(--active-color);
}

body.theme-light .toolbar-group {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.08);
}

body.theme-light .view-options {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.08);
}

body.theme-light .view-option.active {
  background: rgba(var(--accent-rgb), 0.18);
}

body.theme-light .list-header {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(245, 245, 245, 0.96));
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

body.theme-light .drop-indicator {
  background: rgba(255, 255, 255, 0.96);
}

body.theme-light .typeahead-indicator {
  background: rgba(255, 255, 255, 0.96);
  border-color: rgba(0, 0, 0, 0.1);
}

body.theme-light .file-item:hover {
  background: var(--hover-color);
  box-shadow: none;
}

body.theme-light .file-item.selected {
  background: rgba(var(--accent-rgb), 0.16);
  border-color: rgba(var(--accent-rgb), 0.3);
  box-shadow: none;
}

body.theme-light .file-item.selected:hover {
  background: rgba(var(--accent-rgb), 0.2);
}

body.theme-light .file-item.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.2);
  border-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.4);
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.2);
}

body.theme-light .file-grid.drag-over {
  background: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.03);
  border-color: rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.25);
}

body.theme-light .file-item:focus {
  box-shadow: 0 0 0 2px rgba(var(--system-accent-rgb, var(--accent-rgb)), 0.4);
}

body.theme-light .zoom-popup {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

body.theme-light .zoom-btn {
  background: transparent;
  border: none;
}

body.theme-light .zoom-btn:hover {
  background: rgba(0, 0, 0, 0.05);
}

body.theme-light .zoom-btn .twemoji,
body.theme-light .zoom-btn .twemoji-small {
  filter: none;
}

body.theme-light .zoom-btn:active {
  background: rgba(0, 0, 0, 0.08);
}

body.theme-light .zoom-level {
  color: rgba(0, 0, 0, 0.9);
}

body.theme-light .zoom-divider {
  background: rgba(0, 0, 0, 0.08);
}

body.theme-light .archive-operations-panel {
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-shadow:
    0 16px 48px rgba(0, 0, 0, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

body.theme-light .archive-operations-header {
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
  color: var(--text-primary);
  background: rgba(0, 0, 0, 0.01);
}

body.theme-light .archive-operation-item {
  background: rgba(0, 0, 0, 0.02);
  border: 1px solid rgba(0, 0, 0, 0.06);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

body.theme-light .archive-operation-title {
  color: var(--text-primary);
}

body.theme-light .archive-operation-cancel {
  background: rgba(255, 59, 48, 0.08);
  border: 1px solid rgba(255, 59, 48, 0.2);
  color: #d32f2f;
}

body.theme-light .archive-operation-cancel:hover {
  background: rgba(255, 59, 48, 0.15);
  border-color: rgba(255, 59, 48, 0.3);
}

body.theme-light .archive-operation-file {
  color: var(--text-secondary);
}

body.theme-light .archive-operation-stats {
  color: var(--text-tertiary);
}

body.theme-light .archive-progress-bar-container {
  background: rgba(0, 0, 0, 0.06);
}

body.theme-light .archive-operations-list::-webkit-scrollbar-track {
  background: transparent;
}

body.theme-light .archive-operations-list::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .archive-operations-list::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .file-view::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .file-view::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .column-view::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .column-view::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .column-pane {
  border-right: 1px solid rgba(0, 0, 0, 0.08);
  background: rgba(0, 0, 0, 0.02);
}

body.theme-light .column-pane::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.12);
}

body.theme-light .column-pane::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

body.theme-light .preview-info {
  background: rgba(0, 0, 0, 0.03);
}

body.theme-light .preview-info-item {
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}

body.theme-light {
  --spinner-track: rgba(0, 0, 0, 0.12);
}

body.theme-light .sidebar::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .sidebar::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .preview-content::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .preview-content::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .modal-content::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .modal-content::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .history-dropdown::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

body.theme-light .history-dropdown::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

body.theme-light .preview-text,
body.theme-light pre.preview-text {
  background: rgba(0, 0, 0, 0.04);
}

body.theme-light pre.preview-text code.hljs {
  background: transparent;
}

body.theme-dark {
  background:
    radial-gradient(ellipse 120% 120% at 50% 50%, rgba(50, 100, 180, 0.015) 0%, transparent 50%),
    linear-gradient(
      135deg,
      #1a2332 0%,
      #1b2535 8%,
      #1c2738 16%,
      #1d293b 24%,
      #1e2b3e 32%,
      #1f2d41 40%,
      #202f44 48%,
      #213047 50%,
      #202f44 52%,
      #1f2d41 60%,
      #1e2b3e 68%,
      #1d293b 76%,
      #1c2738 84%,
      #1b2535 92%,
      #1a2332 100%
    );
  --bg-primary: #1f2d41;
  --bg-primary-rgb: 31, 45, 65;
  --bg-secondary: #263548;
  --dropdown-bg: #263548;
  --text-primary: #e8eef7;
  --text-secondary: #c5d1e3;
  --text-tertiary: #93a5be;
  --glass-bg: rgba(31, 45, 65, 0.8);
  --glass-border: rgba(232, 238, 247, 0.1);
  --themed-icon-hue: 210deg;
}

body.theme-dark::before {
  background:
    radial-gradient(ellipse 80% 60% at 20% 50%, rgba(50, 110, 200, 0.045) 0%, transparent 50%),
    radial-gradient(ellipse 70% 50% at 80% 80%, rgba(70, 130, 220, 0.035) 0%, transparent 50%),
    radial-gradient(ellipse 60% 40% at 40% 20%, rgba(60, 100, 180, 0.025) 0%, transparent 50%);
}

body.theme-dark .status-bar {
  background: rgba(31, 45, 65, 0.95);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

body.theme-dark .status-left span,
body.theme-dark .status-right span {
  color: rgba(255, 255, 255, 0.95);
}

body.theme-dark code.hljs {
  color: var(--text-primary);
  background: transparent;
}

body.theme-nord {
  --accent-color: #88c0d0;
  --accent-rgb: 136, 192, 208;
  --accent-hover: #81a1c1;
  --accent-active: #5e81ac;
  --bg-primary: #2e3440;
  --bg-primary-rgb: 46, 52, 64;
  --bg-secondary: #3b4252;
  --dropdown-bg: #3b4252;
  --text-primary: #eceff4;
  --text-secondary: #d8dee9;
  --text-tertiary: #a3be8c;
  --glass-bg: rgba(46, 52, 64, 0.8);
  --glass-border: rgba(236, 239, 244, 0.1);
  --danger-color: #bf616a;
  --success-color: #a3be8c;
  --warning-color: #ebcb8b;
  --themed-icon-hue: 190deg;
  background: linear-gradient(135deg, #2e3440 0%, #3b4252 50%, #2e3440 100%);
}

body.theme-nord .glass-panel {
  background: rgba(59, 66, 82, 0.7);
  border-color: rgba(236, 239, 244, 0.08);
}

body.theme-catppuccin {
  --accent-color: #cba6f7;
  --accent-rgb: 203, 166, 247;
  --accent-hover: #b4befe;
  --accent-active: #89b4fa;
  --bg-primary: #1e1e2e;
  --bg-primary-rgb: 30, 30, 46;
  --bg-secondary: #313244;
  --dropdown-bg: #313244;
  --text-primary: #cdd6f4;
  --text-secondary: #bac2de;
  --text-tertiary: #a6adc8;
  --glass-bg: rgba(30, 30, 46, 0.8);
  --glass-border: rgba(205, 214, 244, 0.1);
  --danger-color: #f38ba8;
  --success-color: #a6e3a1;
  --warning-color: #f9e2af;
  --themed-icon-hue: 260deg;
  background: linear-gradient(135deg, #1e1e2e 0%, #313244 50%, #1e1e2e 100%);
}

body.theme-catppuccin .glass-panel {
  background: rgba(49, 50, 68, 0.7);
  border-color: rgba(205, 214, 244, 0.08);
}

body.theme-dracula {
  --accent-color: #bd93f9;
  --accent-rgb: 189, 147, 249;
  --accent-hover: #ff79c6;
  --accent-active: #8be9fd;
  --bg-primary: #282a36;
  --bg-primary-rgb: 40, 42, 54;
  --bg-secondary: #44475a;
  --dropdown-bg: #44475a;
  --text-primary: #f8f8f2;
  --text-secondary: #f8f8f2;
  --text-tertiary: #7284b8;
  --glass-bg: rgba(40, 42, 54, 0.8);
  --glass-border: rgba(248, 248, 242, 0.1);
  --danger-color: #ff5555;
  --success-color: #50fa7b;
  --warning-color: #ffb86c;
  --themed-icon-hue: 270deg;
  background: linear-gradient(135deg, #282a36 0%, #44475a 50%, #282a36 100%);
}

body.theme-dracula .glass-panel {
  background: rgba(68, 71, 90, 0.7);
  border-color: rgba(248, 248, 242, 0.08);
}

body.theme-solarized {
  --accent-color: #268bd2;
  --accent-rgb: 38, 139, 210;
  --accent-hover: #2aa198;
  --accent-active: #859900;
  --bg-primary: #002b36;
  --bg-primary-rgb: 0, 43, 54;
  --bg-secondary: #073642;
  --dropdown-bg: #073642;
  --text-primary: #839496;
  --text-secondary: #93a1a1;
  --text-tertiary: #657b83;
  --glass-bg: rgba(0, 43, 54, 0.8);
  --glass-border: rgba(131, 148, 150, 0.1);
  --danger-color: #dc322f;
  --success-color: #859900;
  --warning-color: #b58900;
  --themed-icon-hue: 190deg;
  background: linear-gradient(135deg, #002b36 0%, #073642 50%, #002b36 100%);
}

body.theme-solarized .glass-panel {
  background: rgba(7, 54, 66, 0.7);
  border-color: rgba(131, 148, 150, 0.08);
}

body.theme-github {
  --accent-color: #58a6ff;
  --accent-rgb: 88, 166, 255;
  --accent-hover: #79c0ff;
  --accent-active: #388bfd;
  --bg-primary: #0d1117;
  --bg-primary-rgb: 13, 17, 23;
  --bg-secondary: #161b22;
  --dropdown-bg: #21262d;
  --text-primary: #c9d1d9;
  --text-secondary: #8b949e;
  --text-tertiary: #6e7681;
  --glass-bg: rgba(13, 17, 23, 0.85);
  --glass-border: rgba(201, 209, 217, 0.1);
  --danger-color: #f85149;
  --success-color: #3fb950;
  --warning-color: #d29922;
  --themed-icon-hue: 210deg;
  background: linear-gradient(135deg, #0d1117 0%, #161b22 50%, #0d1117 100%);
}

body.theme-github .glass-panel {
  background: rgba(22, 27, 34, 0.75);
  border-color: rgba(201, 209, 217, 0.08);
}

body.theme-dark,
body.theme-nord,
body.theme-catppuccin,
body.theme-dracula,
body.theme-solarized,
body.theme-github {
  --hover-color: color-mix(in srgb, var(--text-primary) 6%, transparent);
  --active-color: color-mix(in srgb, var(--text-primary) 10%, transparent);
  --separator: color-mix(in srgb, var(--text-primary) 12%, transparent);
  --surface-0: var(--bg-primary);
  --surface-1: var(--bg-secondary);
  --surface-2: color-mix(in srgb, var(--bg-secondary) 88%, transparent);
  --surface-overlay: var(--glass-bg);
  --panel-border: color-mix(in srgb, var(--text-primary) 12%, transparent);
  --panel-border-strong: color-mix(in srgb, var(--text-primary) 20%, transparent);
  --interactive-hover: var(--hover-color);
  --interactive-active: var(--active-color);
  --interactive-selected: var(--accent-light);
  --interactive-selected-border: var(--accent-strong);
  --glass-modal-bg: rgba(var(--bg-primary-rgb), 0.98);
  --glass-modal-border: color-mix(in srgb, var(--text-primary) 12%, transparent);
}

body.theme-custom {
  --accent-color: var(--custom-accent-color, #0078d4);
  --accent-rgb: var(--custom-accent-rgb, 0, 120, 212);
  --bg-primary: var(--custom-bg-primary, #1a1a1a);
  --bg-primary-rgb: var(--custom-bg-primary-rgb, 26, 26, 26);
  --bg-secondary: var(--custom-bg-secondary, #252525);
  --text-primary: var(--custom-text-primary, #ffffff);
  --text-secondary: var(--custom-text-secondary, rgba(255, 255, 255, 0.75));
  --glass-bg: var(--custom-glass-bg, rgba(255, 255, 255, 0.03));
  --glass-border: var(--custom-glass-border, rgba(255, 255, 255, 0.08));
  --surface-0: var(--bg-primary);
  --surface-1: var(--bg-secondary);
  --surface-2: color-mix(in srgb, var(--bg-secondary) 88%, transparent);
  --surface-overlay: var(--glass-bg);
  --panel-border: color-mix(in srgb, var(--text-primary) 12%, transparent);
  --panel-border-strong: color-mix(in srgb, var(--text-primary) 20%, transparent);
  --interactive-hover: var(--hover-color);
  --interactive-active: var(--active-color);
  --interactive-selected: var(--accent-light);
  --interactive-selected-border: var(--accent-strong);
}

body.theme-custom {
  background-color: var(--custom-bg-primary, #1a1a1a);
}

body.high-contrast {
  --text-secondary: rgba(255, 255, 255, 0.95) !important;
  --text-tertiary: rgba(255, 255, 255, 0.85) !important;
  --glass-border: rgba(255, 255, 255, 0.35) !important;
  --separator: rgba(255, 255, 255, 0.3) !important;
}

body.high-contrast .glass-panel {
  border-width: 2px !important;
  border-color: var(--glass-border) !important;
}

@media (prefers-color-scheme: light) {
  body:not([class*='theme-']) {
    --glass-bg: rgba(255, 255, 255, 0.96);
    --glass-border: rgba(0, 0, 0, 0.08);
    --glass-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
    --text-primary: #1a1a1a;
    --text-secondary: rgba(0, 0, 0, 0.75);
    --text-tertiary: rgba(0, 0, 0, 0.65);
    --accent-color: #0066b8;
    --accent-rgb: 0, 102, 184;
    --accent-hover: #005a9e;
    --accent-active: #004a80;
    --hover-color: rgba(0, 0, 0, 0.06);
    --active-color: rgba(0, 0, 0, 0.1);
    --bg-primary: #f3f3f3;
    --bg-primary-rgb: 243, 243, 243;
    --bg-secondary: #fafafa;
    --dropdown-bg: rgba(255, 255, 255, 0.98);
    --danger-color: #c42b2b;
    --success-color: #0d6a0d;
    --warning-color: #e67700;
    background: #f3f3f3;
  }
}
